\documentclass{article}

\title{C1 Set Theory}
\author{Robin Adams}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\let\proof\relax
\let\endproof\relax
\let\qed\relax
\usepackage{pf2}
\usepackage[all]{xy}

\newtheorem{axiom}{Axiom}
\newtheorem{axs}[axiom]{Axiom Schema}
\newtheorem{lemma}[axiom]{Lemma}
\newtheorem{proposition}[axiom]{Proposition}
\newtheorem{props}[axiom]{Proposition Schema}
\newtheorem{theorem}[axiom]{Theorem}
\newtheorem{corollary}{Corollary}[axiom]
\theoremstyle{definition}
\newtheorem{definition}[axiom]{Definition}

\newcommand{\dom}{\ensuremath{\operatorname{dom}}}
\newcommand{\fld}{\ensuremath{\operatorname{fld}}}
\newcommand{\inv}[1]{\ensuremath{{#1}^{-1}}}
\newcommand{\ran}{\ensuremath{\operatorname{ran}}}

\begin{document}
    \maketitle

    \section{Primitive Notions}

    Let there be \emph{sets}.

    Let there be a binary relation called \emph{membership}, $\in$. When $x \in y$ holds, we say $x$ is a
    \emph{member} or \emph{element} of $y$. We write $x \notin y$ iff $x$ is not a member of $y$.

    \section{The Axioms}

    \begin{axiom}[Extensionality]
        If two sets have exactly the same members, then they are equal.
    \end{axiom}

    As a consequence of this axiom, we may identify a set $A$ with the class $\{ x : x \in A \}$. The use of
    the symbols $\in$ and $=$ is consistent.

    \begin{definition}
    We say that a class $\mathbf{A}$ \emph{is a set} iff there exists a set $A$ such that $A = \mathbf{A}$.
    That is, the class $\{ x : P(x) \}$ is a set iff
    \[ \exists A. \forall x (x \in A \leftrightarrow P(x)) \enspace . \]
    Otherwise, $\mathbf{A}$ is a \emph{proper class}.
    \end{definition}

    \begin{definition}[Subset]
        If $A$ is a set and $\mathbf{B}$ is a class, we say $A$ is a \emph{subset} of $\mathbf{B}$
        iff $A \subseteq \mathbf{B}$.
    \end{definition}

    \begin{axiom}[Empty Set]
        The empty class is a set, called the \emph{empty set}.
    \end{axiom}

    \begin{axiom}[Pairing]
        For any objects $a$ and $b$, the class $\{a,b\}$ is a set, called a \emph{pair set}.
    \end{axiom}

    \begin{definition}[Union]
        For any class of sets $\mathbf{A}$, the \emph{union} $\bigcup \mathbf{A}$ is the class
        $\{ x : \exists A \in \mathbf{A}. x \in A \}$.

        We write $\bigcup_{P[x_1, \ldots, x_n]} t[x_1, \ldots, x_n]$ for $\bigcup \{ t[x_1, \ldots, x_n]
        : P[x_1, \ldots, x_n] \}$.
    \end{definition}

    \begin{proposition}
        If $\mathbf{A} \subseteq \mathbf{B}$ then $\bigcup \mathbf{A} \subseteq \bigcup \mathbf{B}$.
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{axiom}[Union]
        For any set $A$, the union $\bigcup A$ is a set.
    \end{axiom}

    \begin{proposition}
        For any sets $A$ and $B$, the class $A \cup B$ is a set.
    \end{proposition}

    \begin{proof}
        \pf\ It is $\bigcup \{ A, B \}$. \qed
    \end{proof}

    \begin{props}
        For any objects $a_1$, \ldots, $a_n$, the class $\{ a_1, \ldots, a_n \}$ is a set.
    \end{props}

    \begin{proof}
        \pf\ By repeated application of the Pairing and Union axioms. \qed
    \end{proof}

    \begin{definition}[Power Set]
        For any set $A$, the \emph{power set} of $A$, $\mathcal{P} A$, is the class of all subsets of $A$.
    \end{definition}

    \begin{axiom}[Power Set]
        For any set $A$, the class $\mathcal{P} A$ is a set.
    \end{axiom}

    \begin{axiom}[Subset, Aussonderung]
        For any class $\mathbf{A}$ and set $B$, if $\mathbf{A} \subseteq B$ then $\mathbf{A}$ is a set.
    \end{axiom}

    \begin{proposition}
        For any set $A$ and class $\mathbf{B}$, the intersection $A \cap \mathbf{B}$ is a set.
    \end{proposition}

    \begin{proof}
        \pf\ By the Subset Axiom since it is a subclass of $A$. \qed
    \end{proof}

    \begin{proposition}
        For any set $A$ and class $\mathbf{B}$, the relative complement $A - \mathbf{B}$ is a set.
    \end{proposition}

    \begin{proof}
        \pf\ By the Subset Axiom since it is a subclass of $A$. \qed
    \end{proof}

    \begin{theorem}
        The universal class $\mathbf{V}$ is a proper class.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{\assume{$\mathbf{V}$ is a set.}}
        \step{2}{\pflet{$R = \{ x : x \notin x \}$}}
        \step{3}{$R$ is a set.}
        \begin{proof}
            \pf\ By the Subset Axiom.
        \end{proof}
        \step{4}{$R \in R$ if and only if $R \notin R$}
        \qedstep
        \begin{proof}
            \pf\ This is a contradiction.
        \end{proof}
        \qed
    \end{proof}
    
    \begin{definition}[Intersection]
        For any class of sets $\mathbf{A}$, the \emph{intersection} $\bigcap \mathbf{A}$ is the class
        $\{ x : \forall A \in \mathbf{A}. x \in A \}$.

        We write $\bigcap_{P[x_1, \ldots, x_n]} t[x_1, \ldots, x_n]$ for $\bigcap \{ t[x_1, \ldots, x_n]
        : P[x_1, \ldots, x_n] \}$.
    \end{definition}

    \begin{proposition}
        For any nonempty class of sets $\mathbf{A}$, the class $\bigcap \mathbf{A}$ is a set.
    \end{proposition}

    \begin{proof}
        \pf\ Pick $A \in \mathbf{A}$. Then $\bigcap \mathbf{A} \subseteq A$. \qed
    \end{proof}
    
    \begin{proposition}
        If $\mathbf{A} \subseteq \mathbf{B}$ then $\bigcap \mathbf{B} \subseteq \bigcap \mathbf{A}$.
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{proposition}
        For any set $A$ and class of sets $\mathbf{B}$, we have
        \[ A \cup \bigcap \mathbf{B} = \bigcap \{ A \cup X \mid X \in \mathbf{B} \} \]
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{proposition}
        For any set $A$ and class of sets $\mathbf{B}$, we have
        \[ A \cap \bigcup \mathbf{B} = \bigcup \{ A \cap X \mid X \in \mathbf{B} \} \]
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{proposition}
        For any set $C$ and class of sets $\mathbf{A}$, we have
        \[ C - \bigcup \mathbf{A} = \bigcap \{ C - X \mid X \in \mathbf{A} \} \enspace . \]
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{proposition}
        For any set $C$ and class of sets $\mathbf{A}$, we have
        \[ C - \bigcap \mathbf{A} = \bigcup \{ C - X \mid X \in \mathbf{A} \} \enspace . \]
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \section{Ordered Pairs}

    \begin{definition}[Ordered Pair]
        For any objects $a$ and $b$, the \emph{ordered pair} $(a,b)$ is $\{ \{ a \}, \{a, b \} \}$.
        We call $a$ its \emph{first coordinate} and $b$ its \emph{second coordinate}.
    \end{definition}

    \begin{theorem}
        For any objects $(a,b)$, we have $(a,b) = (c,d)$ if and only if $a = c$ and $b = d$.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{If $(a,b) = (c,d)$ then $a = c$ and $b = d$}
        \begin{proof}
            \step{a}{\assume{$(a,b) = (c,d)$}}
            \step{b}{$a = c$}
            \begin{proof}
                \pf\ Since $\{a\} = \bigcap (a,b) = \bigcap (c,d) = \{c\}$.
            \end{proof}
            \step{c}{$\{a,b\} = \{c,d\}$}
            \begin{proof}
                \pf\ $\{a,b\} = \bigcup (a,b) = \bigcup (c,d) = \{c,d\}$.
            \end{proof}
            \step{cc}{$b = c$ or $b = d$}
            \step{d}{\case{$b = c$}}
            \begin{proof}
                \step{i}{$a = b$}
                \step{ii}{$\{c,d\} = \{a\}$}
                \step{iii}{$b = d$}
            \end{proof}
            \step{e}{\case{$b = d$}}
            \begin{proof}
                \pf\ We have $a = c$ and $b = d$ as required.
            \end{proof}
        \end{proof}
        \step{2}{If $a = c$ and $b = d$ then $(a,b) = (c,d)$}
        \begin{proof}
            \pf\ Trivial.
        \end{proof}
        \qed
    \end{proof}

    \begin{definition}[Cartesian Product]
        The \emph{Cartesian product} of classes $\mathbf{A}$ and $\mathbf{B}$ is the class
        \[ \mathbf{A} \times \mathbf{B} = \{ (x,y) : x \in \mathbf{A}, y \in \mathbf{B} \} \enspace . \]
    \end{definition}

    \begin{lemma}
        For any objects $x$ and $y$ and set $C$, if $x \in C$ and $y \in C$ then $(x,y) \in \mathcal{PP} C$.
    \end{lemma}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{corollary}
        For any sets $A$ and $B$, the Cartesian product $A \times B$ is a set.
    \end{corollary}

    \begin{proof}
        \pf\ By the Subset Axiom applied to $\mathcal{PP}(A \cup B)$. \qed
    \end{proof}

    \begin{lemma}
        If $(x,y) \in \mathbf{A}$ then $x, y \in \bigcup \bigcup \mathbf{A}$.
    \end{lemma}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \section{Relations}

    \begin{definition}[Relation]
        A \emph{relation} is a class of ordered pairs. It is \emph{small} iff it is a set.

        When $\mathbf{R}$ is a relation, we write $x \mathbf{R} y$ for $(x,y) \in \mathbf{R}$.
    \end{definition}

    \begin{definition}[Domain]
        The \emph{domain} of a class $\mathbf{R}$ is $\dom \mathbf{R} = \{ x : \exists y. (x,y) \in \mathbf{R} \}$.
    \end{definition}

    \begin{definition}[Range]
        The \emph{range} of a class $\mathbf{R}$ is $\ran \mathbf{R} = \{ y : \exists x. (x,y) \in \mathbf{R} \}$.
    \end{definition}

    \begin{definition}[Field]
        The \emph{field} of a class $\mathbf{R}$ is $\fld \mathbf{R} = \dom \mathbf{R} \cup \ran \mathbf{R}$.
    \end{definition}

    \begin{proposition}
        If $R$ is a set then $\dom R$, $\ran R$ and $\fld R$ are sets.
    \end{proposition}

    \begin{proof}
        \pf\ Apply the Subset Axiom to $\bigcup \bigcup R$. \qed
    \end{proof}
    
    \begin{definition}[Single-Rooted]
        A class $\mathbf{R}$ is \emph{single-rooted} iff, for all $y \in \ran \mathbf{R}$,
        there is only one $x$ such that $x \mathbf{R} y$.
    \end{definition}

    \begin{definition}[Inverse]
        The \emph{inverse} of a class $\mathbf{F}$ is the class $\mathbf{F}^{-1} = \{ (y,x)
        \mid (x,y) \in \mathbf{F} \}$.
    \end{definition}

    \begin{theorem}
        For any class $\mathbf{F}$, we have $\dom \mathbf{F}^{-1} = \ran \mathbf{F}$
        and $\ran \mathbf{F}^{-1} = \dom \mathbf{F}$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        For a relation $\mathbf{F}$, $(\mathbf{F}^{-1})^{-1} = \mathbf{F}$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[Composition]
        The \emph{composition} of classes $\mathbf{F}$ and $\mathbf{G}$ is the class
        $\mathbf{G} \circ \mathbf{F} = \{ (x,z) \mid \exists y. (x,y) \in \mathbf{F} \wedge (y,z) \in \mathbf{G} \}$.
    \end{definition}

    \begin{theorem}
        For any classes $\mathbf{F}$ and $\mathbf{G}$, $\inv{(\mathbf{F} \circ \mathbf{G})} =
        \inv{\mathbf{G}} \circ \inv{\mathbf{F}}$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[Restriction]
        The \emph{restriction} of the class $\mathbf{F}$ to the class $\mathbf{A}$ is the class
        $\mathbf{F} \restriction \mathbf{A} = \{ (x,y) : x \in A \wedge (x,y) \in \mathbf{F} \}$.
    \end{definition}

    \begin{definition}[Image]
        The \emph{image} of the class $\mathbf{A}$ under the class $\mathbf{F}$ is the class
        $\mathbf{F}(\mathbf{A}) = \{ y : \exists x \in \mathbf{A}. (x,y) \in \mathbf{F} \}$.
    \end{definition}
    
    \begin{theorem}
        \[ \mathbf{F}(\mathbf{A} \cup \mathbf{B}) = \mathbf{F}(\mathbf{A}) \cup \mathbf{F}(\mathbf{B}) \]
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        \[ \mathbf{F}(\bigcup \mathbf{A}) = \bigcup \{ \mathbf{F}(X) : X \in \mathbf{A} \} \]
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}
    
    \begin{theorem}
        \[ \mathbf{F}(\mathbf{A} \cap \mathbf{B}) \subseteq \mathbf{F}(\mathbf{A}) \cap \mathbf{F}(\mathbf{B}) \]
        Equality holds if $\mathbf{F}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        \[ \mathbf{F}(\bigcap \mathbf{A}) \subseteq \bigcap \{ \mathbf{F}(X) : X \in \mathbf{A} \} \]
        Equality holds if $\mathbf{F}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        \[ \mathbf{F}(\mathbf{A}) - \mathbf{F}(\mathbf{B}) \subseteq \mathbf{F}(\mathbf{A} - \mathbf{B}) \]
        Equality holds if $\mathbf{F}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \section{$n$-ary Relations}

    \begin{definition}
        Given objects $a$, $b$, $c$, define the \emph{ordered triple}
        $(a,b,c)$ to be $((a,b),c)$.

        Define $(a,b,c,d) = ((a,b,c),d)$, etc.

        Define the \emph{1-tuple} $(a)$ to be $a$.
    \end{definition}

    \begin{definition}[$n$-ary Relation]
        Given a class $\mathbf{A}$, an \emph{$n$-ary relation} on $\mathbf{A}$ is a class of ordered
        $n$-tuples, all of whose components are in $\mathbf{A}$.
    \end{definition}

    \section{Functions}

    \begin{definition}[Function]
        A \emph{function} is a relation $\mathbf{F}$ such that, for all $x \in \dom \mathbf{F}$,
        there is only one $y$ such that $x \mathbf{F} y$. We call this unique $y$ the \emph{value}
        of $\mathbf{F}$ at $x$ and denote it by $\mathbf{F}(x)$.

        We say $\mathbf{F}$ is a function \emph{from} $\mathbf{A}$ \emph{into} $\mathbf{B}$,
        or $\mathbf{F}$ \emph{maps} $\mathbf{A}$ into $\mathbf{B}$, and write $\mathbf{F} : \mathbf{A}
        \rightarrow \mathbf{B}$, iff $\mathbf{F}$ is a function, $\dom \mathbf{F} = \mathbf{A}$,
        and $\ran \mathbf{F} \subseteq \mathbf{B}$.

        If, in addition, $\ran \mathbf{F} = \mathbf{B}$, we say $\mathbf{F}$ is a function from $\mathbf{A}$
        \emph{onto} $\mathbf{B}$.
    \end{definition}

    \begin{theorem}
        For a class $\mathbf{F}$, $\inv{\mathbf{F}}$ is a function if and only if $\mathbf{F}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        A relation $\mathbf{F}$ is a function if and only if $\inv{\mathbf{F}}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        For any function $\mathbf{G}$ and classes $\mathbf{A}$ and $\mathbf{B}$,
        \begin{align*}
            \inv{\mathbf{G}}(\bigcup \mathbf{A}) & = \bigcup \{ \inv{\mathbf{G}}(X) : X \in \mathbf{A} \} \\
            \inv{\mathbf{G}}(\bigcap \mathbf{A}) & = \bigcap \{ \inv{\mathbf{G}}(X) : X \in \mathbf{A} \} &
            (\text{if } \mathbf{A} \neq \emptyset) \\
            \inv{\mathbf{G}}(\mathbf{A} - \mathbf{B}) & = \inv{\mathbf{G}}(\mathbf{A}) - \inv{\mathbf{G}}(\mathbf{B})
        \end{align*}
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        Assume that $\mathbf{F}$ and $\mathbf{G}$ are functions. Then $\mathbf{F} \circ \mathbf{G}$
        is a function, its domain is $\{ x \in \dom \mathbf{G} : \mathbf{G}(x) \in \dom \mathbf{F} \}$,
        and for $x$ in its domain,
        \[ (\mathbf{F} \circ \mathbf{G})(x) = \mathbf{F}(\mathbf{G}(x)) \enspace . \]
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[One-to-one]
        A function $\mathbf{F}$ is \emph{one-to-one} or an \emph{injection} iff it is single-rooted.
    \end{definition}

    \begin{theorem}
        Let $\mathbf{F}$ be a one-to-one function. For $x \in \dom \mathbf{F}$, $\inv{\mathbf{F}}(\mathbf{F}(x)) = x$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        Let $\mathbf{F}$ be a one-to-one function. For $y \in \ran \mathbf{F}$, $\mathbf{F}(\inv{\mathbf{F}}(y)) = y$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[Identity Function]
        For any class $\mathbf{A}$, the \emph{identity} function on $\mathbf{A}$ is $\mathrm{id}_\mathbf{A} =
        \{ (x,x) \mid x \in \mathbf{A} \}$.
    \end{definition}

    \begin{theorem}
        Let $F : A \rightarrow B$. Assume $A \neq \emptyset$. Then $F$ has a left inverse (i.e. there exists
        $G : B \rightarrow A$ such that $G \circ F = \mathrm{id}_A$) if and only if $F$ is one-to-one.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{If $F$ is one-to-one then $F$ has a left inverse.}
        \begin{proof}
            \step{a}{\assume{$F$ is one-to-one.}}
            \step{b}{$\inv{F} : \ran F \rightarrow A$}
            \step{c}{\pick\ $a \in A$}
            \step{d}{Define $G : B \rightarrow A$ by:
            \[ G(x) = \begin{cases}
                \inv{F}(x) & \text{if } x \in \ran F \\
                a & \text{if } x \in B - \ran F
            \end{cases} \]}
            \step{f}{$\forall x \in A. G(F(x)) = x$}
        \end{proof}
        \step{2}{If $F$ has a left inverse then $F$ is one-to-one.}
        \begin{proof}
            \step{a}{\assume{$F$ has a left inverse $G$.}}
            \step{b}{\pflet{$x, y \in A$ with $F(x) = F(y)$}}
            \step{c}{$x = y$}
            \begin{proof}
                \pf\ $x = G(F(x)) = G(F(y)) = y$.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \section{The Axiom of Choice}

    \begin{axiom}[Choice]
        For any relation $R$ there exists a function $H \subseteq R$ with $\dom H = \dom R$.
    \end{axiom}

    \begin{theorem}
        Let $F : A \rightarrow B$. Then $F$ has a right inverse if and only if $F$ maps $A$ onto $B$.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{If $F$ has a right inverse then $F$ maps $A$ onto $B$.}
        \begin{proof}
            \pf\ If $H : B \rightarrow A$ is a right inverse, then for any $y$ in $B$, we have
            $y = F(H(y))$.
        \end{proof}
        \step{2}{If $F$ maps $A$ onto $B$ then $F$ has a right inverse.}
        \begin{proof}
            \step{a}{\assume{$F$ maps $A$ onto $B$.}}
            \step{b}{\pick\ a function $H$ with $H \subseteq \inv{F}$ and $\dom H = \dom \inv{F}$}
            \begin{proof}
                \pf\ By the Axiom of Choice.
            \end{proof}
            \step{c}{$\dom H = B$}
            \begin{proof}
                \pf\ $\dom H = \dom \inv{F} = \ran F = B$ by \stepref{a}.
            \end{proof}
            \step{d}{For all $y \in B$ we have $F(H(y)) = y$}
            \begin{proof}
                \step{i}{\pflet{$y \in B$}}
                \step{ii}{$(y,H(y)) \in \inv{F}$}
                \step{iii}{$F(H(y)) = y$}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \section{Sets of Functions}

    \begin{definition}
        Let $A$ be a set and $\mathbf{B}$ be a class. Then $\mathbf{B}^A$ is the class of all functions
        $A \rightarrow \mathbf{B}$.
    \end{definition}

    \section{Dependent Products}

    \begin{definition}
        Let $I$ be a set and $H_i$ a set for all $i \in I$. Define
        \[ \prod_{i \in I} H_i = \{ f : \text{$f$ is a function}, \dom f = I, \forall i \in I. f(i) \in H_i \} \enspace . \]
    \end{definition}

    \begin{theorem}
        The Axiom of Choice is equivalent to the statement: For any set $I$ and any function $H$ with domain
        $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{If the Axiom of Choice is true then, for any set $I$ and any function $H$ with domain
        $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$.}
        \begin{proof}
            \step{a}{\assume{The Axiom of Choice.}}
            \step{b}{\pflet{$I$ be a set.}}
            \step{c}{\pflet{$H$ be a function with domain $I$.}}
            \step{d}{\assume{$H(i) \neq \emptyset$ for all $i \in I$.}}
            \step{e}{\pflet{$R = \{ (i,x) : i \in I, x \in H(i) \}$}}
            \step{f}{\pick\ a function $F \subseteq R$ with $\dom F = \dom R$ \prove{$F \in \prod_{i \in I} H(i)$}}
            \begin{proof}
                \pf\ By the Axiom of Choice.
            \end{proof}
            \step{g}{$\dom H = I$}
            \begin{proof}
                \pf\ We have $\dom R = I$ since for all $i \in I$ there exists $x$ such that $x \in H(i)$.
            \end{proof}
            \step{h}{$\forall i \in I. F(i) \in H(i)$}
            \begin{proof}
                \pf\ Since $iRF(i)$.
            \end{proof}
        \end{proof}
        \step{2}{If, for any set $I$ and any function $H$ with domain
        $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$,
        then the Axiom of Choice is true.}
        \begin{proof}
            \step{a}{\assume{For any set $I$ and any function $H$ with domain
            $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$}}
            \step{b}{\pflet{$R$ be a relation}}
            \step{c}{\pflet{$I = \dom R$}}
            \step{d}{Define the function $H$ with domain $I$ by: for $i \in I$, $H(i) = \{ y : iRy \}$}
            \step{e}{$H(i) \neq \emptyset$ for all $i \in I$}
            \step{f}{\pick\ $F \in \prod_{i \in I} H(i)$}
            \begin{proof}
                \pf\ By \stepref{a}
            \end{proof}
            \step{g}{$F$ is a function}
            \step{h}{$F \subseteq R$}
            \begin{proof}
                \pf\ For all $i \in I$ we have $F(i) \in H(i)$ and so $iRF(i)$.
            \end{proof}
            \step{i}{$\dom F = \dom R$}
        \end{proof}
        \qed
    \end{proof}
\end{document}