\documentclass{article}

\title{C1 Set Theory}
\author{Robin Adams}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\let\proof\relax
\let\endproof\relax
\let\qed\relax
\usepackage{pf2}
\usepackage[all]{xy}

\newtheorem{axiom}{Axiom}
\newtheorem{axs}[axiom]{Axiom Schema}
\newtheorem{lemma}[axiom]{Lemma}
\newtheorem{proposition}[axiom]{Proposition}
\newtheorem{props}[axiom]{Proposition Schema}
\newtheorem{theorem}[axiom]{Theorem}
\newtheorem{corollary}{Corollary}[axiom]
\theoremstyle{definition}
\newtheorem{definition}[axiom]{Definition}

\newcommand{\dom}{\ensuremath{\operatorname{dom}}}
\newcommand{\fld}{\ensuremath{\operatorname{fld}}}
\newcommand{\inv}[1]{\ensuremath{{#1}^{-1}}}
\newcommand{\ran}{\ensuremath{\operatorname{ran}}}

\begin{document}
    \maketitle

    \section{Primitive Notions}

    Let there be \emph{sets}.

    Let there be a binary relation called \emph{membership}, $\in$. When $x \in y$ holds, we say $x$ is a
    \emph{member} or \emph{element} of $y$. We write $x \notin y$ iff $x$ is not a member of $y$.

    \section{The Axioms}

    \begin{axiom}[Extensionality]
        If two sets have exactly the same members, then they are equal.
    \end{axiom}

    As a consequence of this axiom, we may identify a set $A$ with the class $\{ x : x \in A \}$. The use of
    the symbols $\in$ and $=$ is consistent.

    \begin{definition}
    We say that a class $\mathbf{A}$ \emph{is a set} iff there exists a set $A$ such that $A = \mathbf{A}$.
    That is, the class $\{ x : P(x) \}$ is a set iff
    \[ \exists A. \forall x (x \in A \leftrightarrow P(x)) \enspace . \]
    Otherwise, $\mathbf{A}$ is a \emph{proper class}.
    \end{definition}

    \begin{definition}[Subset]
        If $A$ is a set and $\mathbf{B}$ is a class, we say $A$ is a \emph{subset} of $\mathbf{B}$
        iff $A \subseteq \mathbf{B}$.
    \end{definition}

    \begin{axiom}[Empty Set]
        The empty class is a set, called the \emph{empty set}.
    \end{axiom}

    \begin{axiom}[Pairing]
        For any objects $a$ and $b$, the class $\{a,b\}$ is a set, called a \emph{pair set}.
    \end{axiom}

    \begin{definition}[Union]
        For any class of sets $\mathbf{A}$, the \emph{union} $\bigcup \mathbf{A}$ is the class
        $\{ x : \exists A \in \mathbf{A}. x \in A \}$.

        We write $\bigcup_{P[x_1, \ldots, x_n]} t[x_1, \ldots, x_n]$ for $\bigcup \{ t[x_1, \ldots, x_n]
        : P[x_1, \ldots, x_n] \}$.
    \end{definition}

    \begin{proposition}
        If $\mathbf{A} \subseteq \mathbf{B}$ then $\bigcup \mathbf{A} \subseteq \bigcup \mathbf{B}$.
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{axiom}[Union]
        For any set $A$, the union $\bigcup A$ is a set.
    \end{axiom}

    \begin{proposition}
        For any sets $A$ and $B$, the class $A \cup B$ is a set.
    \end{proposition}

    \begin{proof}
        \pf\ It is $\bigcup \{ A, B \}$. \qed
    \end{proof}

    \begin{props}
        For any objects $a_1$, \ldots, $a_n$, the class $\{ a_1, \ldots, a_n \}$ is a set.
    \end{props}

    \begin{proof}
        \pf\ By repeated application of the Pairing and Union axioms. \qed
    \end{proof}

    \begin{definition}[Power Set]
        For any set $A$, the \emph{power set} of $A$, $\mathcal{P} A$, is the class of all subsets of $A$.
    \end{definition}

    \begin{axiom}[Power Set]
        For any set $A$, the class $\mathcal{P} A$ is a set.
    \end{axiom}

    \begin{axiom}[Subset, Aussonderung]
        For any class $\mathbf{A}$ and set $B$, if $\mathbf{A} \subseteq B$ then $\mathbf{A}$ is a set.
    \end{axiom}

    \begin{proposition}
        For any set $A$ and class $\mathbf{B}$, the intersection $A \cap \mathbf{B}$ is a set.
    \end{proposition}

    \begin{proof}
        \pf\ By the Subset Axiom since it is a subclass of $A$. \qed
    \end{proof}

    \begin{proposition}
        For any set $A$ and class $\mathbf{B}$, the relative complement $A - \mathbf{B}$ is a set.
    \end{proposition}

    \begin{proof}
        \pf\ By the Subset Axiom since it is a subclass of $A$. \qed
    \end{proof}

    \begin{theorem}
        The universal class $\mathbf{V}$ is a proper class.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{\assume{$\mathbf{V}$ is a set.}}
        \step{2}{\pflet{$R = \{ x : x \notin x \}$}}
        \step{3}{$R$ is a set.}
        \begin{proof}
            \pf\ By the Subset Axiom.
        \end{proof}
        \step{4}{$R \in R$ if and only if $R \notin R$}
        \qedstep
        \begin{proof}
            \pf\ This is a contradiction.
        \end{proof}
        \qed
    \end{proof}
    
    \begin{definition}[Intersection]
        For any class of sets $\mathbf{A}$, the \emph{intersection} $\bigcap \mathbf{A}$ is the class
        $\{ x : \forall A \in \mathbf{A}. x \in A \}$.

        We write $\bigcap_{P[x_1, \ldots, x_n]} t[x_1, \ldots, x_n]$ for $\bigcap \{ t[x_1, \ldots, x_n]
        : P[x_1, \ldots, x_n] \}$.
    \end{definition}

    \begin{proposition}
        For any nonempty class of sets $\mathbf{A}$, the class $\bigcap \mathbf{A}$ is a set.
    \end{proposition}

    \begin{proof}
        \pf\ Pick $A \in \mathbf{A}$. Then $\bigcap \mathbf{A} \subseteq A$. \qed
    \end{proof}
    
    \begin{proposition}
        If $\mathbf{A} \subseteq \mathbf{B}$ then $\bigcap \mathbf{B} \subseteq \bigcap \mathbf{A}$.
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{proposition}
        For any set $A$ and class of sets $\mathbf{B}$, we have
        \[ A \cup \bigcap \mathbf{B} = \bigcap \{ A \cup X \mid X \in \mathbf{B} \} \]
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{proposition}
        For any set $A$ and class of sets $\mathbf{B}$, we have
        \[ A \cap \bigcup \mathbf{B} = \bigcup \{ A \cap X \mid X \in \mathbf{B} \} \]
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{proposition}
        For any set $C$ and class of sets $\mathbf{A}$, we have
        \[ C - \bigcup \mathbf{A} = \bigcap \{ C - X \mid X \in \mathbf{A} \} \enspace . \]
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{proposition}
        For any set $C$ and class of sets $\mathbf{A}$, we have
        \[ C - \bigcap \mathbf{A} = \bigcup \{ C - X \mid X \in \mathbf{A} \} \enspace . \]
    \end{proposition}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \section{Ordered Pairs}

    \begin{definition}[Ordered Pair]
        For any objects $a$ and $b$, the \emph{ordered pair} $(a,b)$ is $\{ \{ a \}, \{a, b \} \}$.
        We call $a$ its \emph{first coordinate} and $b$ its \emph{second coordinate}.
    \end{definition}

    \begin{theorem}
        For any objects $(a,b)$, we have $(a,b) = (c,d)$ if and only if $a = c$ and $b = d$.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{If $(a,b) = (c,d)$ then $a = c$ and $b = d$}
        \begin{proof}
            \step{a}{\assume{$(a,b) = (c,d)$}}
            \step{b}{$a = c$}
            \begin{proof}
                \pf\ Since $\{a\} = \bigcap (a,b) = \bigcap (c,d) = \{c\}$.
            \end{proof}
            \step{c}{$\{a,b\} = \{c,d\}$}
            \begin{proof}
                \pf\ $\{a,b\} = \bigcup (a,b) = \bigcup (c,d) = \{c,d\}$.
            \end{proof}
            \step{cc}{$b = c$ or $b = d$}
            \step{d}{\case{$b = c$}}
            \begin{proof}
                \step{i}{$a = b$}
                \step{ii}{$\{c,d\} = \{a\}$}
                \step{iii}{$b = d$}
            \end{proof}
            \step{e}{\case{$b = d$}}
            \begin{proof}
                \pf\ We have $a = c$ and $b = d$ as required.
            \end{proof}
        \end{proof}
        \step{2}{If $a = c$ and $b = d$ then $(a,b) = (c,d)$}
        \begin{proof}
            \pf\ Trivial.
        \end{proof}
        \qed
    \end{proof}

    \begin{definition}[Cartesian Product]
        The \emph{Cartesian product} of classes $\mathbf{A}$ and $\mathbf{B}$ is the class
        \[ \mathbf{A} \times \mathbf{B} = \{ (x,y) : x \in \mathbf{A}, y \in \mathbf{B} \} \enspace . \]
    \end{definition}

    \begin{lemma}
        For any objects $x$ and $y$ and set $C$, if $x \in C$ and $y \in C$ then $(x,y) \in \mathcal{PP} C$.
    \end{lemma}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{corollary}
        For any sets $A$ and $B$, the Cartesian product $A \times B$ is a set.
    \end{corollary}

    \begin{proof}
        \pf\ By the Subset Axiom applied to $\mathcal{PP}(A \cup B)$. \qed
    \end{proof}

    \begin{lemma}
        If $(x,y) \in \mathbf{A}$ then $x, y \in \bigcup \bigcup \mathbf{A}$.
    \end{lemma}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \section{Relations}

    \begin{definition}[Relation]
        A \emph{relation} is a class of ordered pairs. It is \emph{small} iff it is a set.

        When $\mathbf{R}$ is a relation, we write $x \mathbf{R} y$ for $(x,y) \in \mathbf{R}$.
    \end{definition}

    \begin{definition}[Domain]
        The \emph{domain} of a class $\mathbf{R}$ is $\dom \mathbf{R} = \{ x : \exists y. (x,y) \in \mathbf{R} \}$.
    \end{definition}

    \begin{definition}[Range]
        The \emph{range} of a class $\mathbf{R}$ is $\ran \mathbf{R} = \{ y : \exists x. (x,y) \in \mathbf{R} \}$.
    \end{definition}

    \begin{definition}[Field]
        The \emph{field} of a class $\mathbf{R}$ is $\fld \mathbf{R} = \dom \mathbf{R} \cup \ran \mathbf{R}$.
    \end{definition}

    \begin{proposition}
        If $R$ is a set then $\dom R$, $\ran R$ and $\fld R$ are sets.
    \end{proposition}

    \begin{proof}
        \pf\ Apply the Subset Axiom to $\bigcup \bigcup R$. \qed
    \end{proof}
    
    \begin{definition}[Single-Rooted]
        A class $\mathbf{R}$ is \emph{single-rooted} iff, for all $y \in \ran \mathbf{R}$,
        there is only one $x$ such that $x \mathbf{R} y$.
    \end{definition}

    \begin{definition}[Inverse]
        The \emph{inverse} of a class $\mathbf{F}$ is the class $\mathbf{F}^{-1} = \{ (y,x)
        \mid (x,y) \in \mathbf{F} \}$.
    \end{definition}

    \begin{theorem}
        For any class $\mathbf{F}$, we have $\dom \mathbf{F}^{-1} = \ran \mathbf{F}$
        and $\ran \mathbf{F}^{-1} = \dom \mathbf{F}$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        For a relation $\mathbf{F}$, $(\mathbf{F}^{-1})^{-1} = \mathbf{F}$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[Composition]
        The \emph{composition} of classes $\mathbf{F}$ and $\mathbf{G}$ is the class
        $\mathbf{G} \circ \mathbf{F} = \{ (x,z) \mid \exists y. (x,y) \in \mathbf{F} \wedge (y,z) \in \mathbf{G} \}$.
    \end{definition}

    \begin{theorem}
        For any classes $\mathbf{F}$ and $\mathbf{G}$, $\inv{(\mathbf{F} \circ \mathbf{G})} =
        \inv{\mathbf{G}} \circ \inv{\mathbf{F}}$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[Restriction]
        The \emph{restriction} of the class $\mathbf{F}$ to the class $\mathbf{A}$ is the class
        $\mathbf{F} \restriction \mathbf{A} = \{ (x,y) : x \in A \wedge (x,y) \in \mathbf{F} \}$.
    \end{definition}

    \begin{definition}[Image]
        The \emph{image} of the class $\mathbf{A}$ under the class $\mathbf{F}$ is the class
        $\mathbf{F}(\mathbf{A}) = \{ y : \exists x \in \mathbf{A}. (x,y) \in \mathbf{F} \}$.
    \end{definition}
    
    \begin{theorem}
        \[ \mathbf{F}(\mathbf{A} \cup \mathbf{B}) = \mathbf{F}(\mathbf{A}) \cup \mathbf{F}(\mathbf{B}) \]
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        \[ \mathbf{F}(\bigcup \mathbf{A}) = \bigcup \{ \mathbf{F}(X) : X \in \mathbf{A} \} \]
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}
    
    \begin{theorem}
        \[ \mathbf{F}(\mathbf{A} \cap \mathbf{B}) \subseteq \mathbf{F}(\mathbf{A}) \cap \mathbf{F}(\mathbf{B}) \]
        Equality holds if $\mathbf{F}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        \[ \mathbf{F}(\bigcap \mathbf{A}) \subseteq \bigcap \{ \mathbf{F}(X) : X \in \mathbf{A} \} \]
        Equality holds if $\mathbf{F}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        \[ \mathbf{F}(\mathbf{A}) - \mathbf{F}(\mathbf{B}) \subseteq \mathbf{F}(\mathbf{A} - \mathbf{B}) \]
        Equality holds if $\mathbf{F}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[Reflexive]
        A binary relation $\mathbf{R}$ on $\mathbf{A}$ is \emph{reflexive} on $\mathbf{A}$ if and only if
        $\forall x \in \mathbf{A}. x\mathbf{R}x$.
    \end{definition}

    \begin{definition}[Symmetric]
        A binary relation $\mathbf{R}$ is \emph{symmetric} iff, whenever $x\mathbf{R}y$, then $y\mathbf{R}x$.
    \end{definition}

    \begin{definition}[Transitive]
        A binary relation $\mathbf{R}$ is \emph{transitive} iff, whenever $x\mathbf{R}y$ and $y\mathbf{R}z$,
        then $x\mathbf{R}z$.
    \end{definition}

    \section{$n$-ary Relations}

    \begin{definition}
        Given objects $a$, $b$, $c$, define the \emph{ordered triple}
        $(a,b,c)$ to be $((a,b),c)$.

        Define $(a,b,c,d) = ((a,b,c),d)$, etc.

        Define the \emph{1-tuple} $(a)$ to be $a$.
    \end{definition}

    \begin{definition}[$n$-ary Relation]
        Given a class $\mathbf{A}$, an \emph{$n$-ary relation} on $\mathbf{A}$ is a class of ordered
        $n$-tuples, all of whose components are in $\mathbf{A}$.
    \end{definition}

    \section{Functions}

    \begin{definition}[Function]
        A \emph{function} is a relation $\mathbf{F}$ such that, for all $x \in \dom \mathbf{F}$,
        there is only one $y$ such that $x \mathbf{F} y$. We call this unique $y$ the \emph{value}
        of $\mathbf{F}$ at $x$ and denote it by $\mathbf{F}(x)$.

        We say $\mathbf{F}$ is a function \emph{from} $\mathbf{A}$ \emph{into} $\mathbf{B}$,
        or $\mathbf{F}$ \emph{maps} $\mathbf{A}$ into $\mathbf{B}$, and write $\mathbf{F} : \mathbf{A}
        \rightarrow \mathbf{B}$, iff $\mathbf{F}$ is a function, $\dom \mathbf{F} = \mathbf{A}$,
        and $\ran \mathbf{F} \subseteq \mathbf{B}$.

        If, in addition, $\ran \mathbf{F} = \mathbf{B}$, we say $\mathbf{F}$ is a function from $\mathbf{A}$
        \emph{onto} $\mathbf{B}$.
    \end{definition}

    \begin{theorem}
        For a class $\mathbf{F}$, $\inv{\mathbf{F}}$ is a function if and only if $\mathbf{F}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        A relation $\mathbf{F}$ is a function if and only if $\inv{\mathbf{F}}$ is single-rooted.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        For any function $\mathbf{G}$ and classes $\mathbf{A}$ and $\mathbf{B}$,
        \begin{align*}
            \inv{\mathbf{G}}(\bigcup \mathbf{A}) & = \bigcup \{ \inv{\mathbf{G}}(X) : X \in \mathbf{A} \} \\
            \inv{\mathbf{G}}(\bigcap \mathbf{A}) & = \bigcap \{ \inv{\mathbf{G}}(X) : X \in \mathbf{A} \} &
            (\text{if } \mathbf{A} \neq \emptyset) \\
            \inv{\mathbf{G}}(\mathbf{A} - \mathbf{B}) & = \inv{\mathbf{G}}(\mathbf{A}) - \inv{\mathbf{G}}(\mathbf{B})
        \end{align*}
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        Assume that $\mathbf{F}$ and $\mathbf{G}$ are functions. Then $\mathbf{F} \circ \mathbf{G}$
        is a function, its domain is $\{ x \in \dom \mathbf{G} : \mathbf{G}(x) \in \dom \mathbf{F} \}$,
        and for $x$ in its domain,
        \[ (\mathbf{F} \circ \mathbf{G})(x) = \mathbf{F}(\mathbf{G}(x)) \enspace . \]
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[One-to-one]
        A function $\mathbf{F}$ is \emph{one-to-one} or an \emph{injection} iff it is single-rooted.
    \end{definition}

    \begin{theorem}
        Let $\mathbf{F}$ be a one-to-one function. For $x \in \dom \mathbf{F}$, $\inv{\mathbf{F}}(\mathbf{F}(x)) = x$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{theorem}
        Let $\mathbf{F}$ be a one-to-one function. For $y \in \ran \mathbf{F}$, $\mathbf{F}(\inv{\mathbf{F}}(y)) = y$.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{definition}[Identity Function]
        For any class $\mathbf{A}$, the \emph{identity} function on $\mathbf{A}$ is $\mathrm{id}_\mathbf{A} =
        \{ (x,x) \mid x \in \mathbf{A} \}$.
    \end{definition}

    \begin{theorem}
        Let $F : A \rightarrow B$. Assume $A \neq \emptyset$. Then $F$ has a left inverse (i.e. there exists
        $G : B \rightarrow A$ such that $G \circ F = \mathrm{id}_A$) if and only if $F$ is one-to-one.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{If $F$ is one-to-one then $F$ has a left inverse.}
        \begin{proof}
            \step{a}{\assume{$F$ is one-to-one.}}
            \step{b}{$\inv{F} : \ran F \rightarrow A$}
            \step{c}{\pick\ $a \in A$}
            \step{d}{Define $G : B \rightarrow A$ by:
            \[ G(x) = \begin{cases}
                \inv{F}(x) & \text{if } x \in \ran F \\
                a & \text{if } x \in B - \ran F
            \end{cases} \]}
            \step{f}{$\forall x \in A. G(F(x)) = x$}
        \end{proof}
        \step{2}{If $F$ has a left inverse then $F$ is one-to-one.}
        \begin{proof}
            \step{a}{\assume{$F$ has a left inverse $G$.}}
            \step{b}{\pflet{$x, y \in A$ with $F(x) = F(y)$}}
            \step{c}{$x = y$}
            \begin{proof}
                \pf\ $x = G(F(x)) = G(F(y)) = y$.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{definition}[Binary Operation]
        A \emph{binary operation} on a set $A$ is a function from $A \times A$ into $A$.
    \end{definition}

    \section{The Axiom of Choice}

    \begin{axiom}[Choice]
        For any relation $R$ there exists a function $H \subseteq R$ with $\dom H = \dom R$.
    \end{axiom}

    \begin{theorem}
        Let $F : A \rightarrow B$. Then $F$ has a right inverse if and only if $F$ maps $A$ onto $B$.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{If $F$ has a right inverse then $F$ maps $A$ onto $B$.}
        \begin{proof}
            \pf\ If $H : B \rightarrow A$ is a right inverse, then for any $y$ in $B$, we have
            $y = F(H(y))$.
        \end{proof}
        \step{2}{If $F$ maps $A$ onto $B$ then $F$ has a right inverse.}
        \begin{proof}
            \step{a}{\assume{$F$ maps $A$ onto $B$.}}
            \step{b}{\pick\ a function $H$ with $H \subseteq \inv{F}$ and $\dom H = \dom \inv{F}$}
            \begin{proof}
                \pf\ By the Axiom of Choice.
            \end{proof}
            \step{c}{$\dom H = B$}
            \begin{proof}
                \pf\ $\dom H = \dom \inv{F} = \ran F = B$ by \stepref{a}.
            \end{proof}
            \step{d}{For all $y \in B$ we have $F(H(y)) = y$}
            \begin{proof}
                \step{i}{\pflet{$y \in B$}}
                \step{ii}{$(y,H(y)) \in \inv{F}$}
                \step{iii}{$F(H(y)) = y$}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \section{Sets of Functions}

    \begin{definition}
        Let $A$ be a set and $\mathbf{B}$ be a class. Then $\mathbf{B}^A$ is the class of all functions
        $A \rightarrow \mathbf{B}$.
    \end{definition}

    \section{Dependent Products}

    \begin{definition}
        Let $I$ be a set and $H_i$ a set for all $i \in I$. Define
        \[ \prod_{i \in I} H_i = \{ f : \text{$f$ is a function}, \dom f = I, \forall i \in I. f(i) \in H_i \} \enspace . \]
    \end{definition}

    \begin{theorem}
        The Axiom of Choice is equivalent to the statement: For any set $I$ and any function $H$ with domain
        $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{If the Axiom of Choice is true then, for any set $I$ and any function $H$ with domain
        $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$.}
        \begin{proof}
            \step{a}{\assume{The Axiom of Choice.}}
            \step{b}{\pflet{$I$ be a set.}}
            \step{c}{\pflet{$H$ be a function with domain $I$.}}
            \step{d}{\assume{$H(i) \neq \emptyset$ for all $i \in I$.}}
            \step{e}{\pflet{$R = \{ (i,x) : i \in I, x \in H(i) \}$}}
            \step{f}{\pick\ a function $F \subseteq R$ with $\dom F = \dom R$ \prove{$F \in \prod_{i \in I} H(i)$}}
            \begin{proof}
                \pf\ By the Axiom of Choice.
            \end{proof}
            \step{g}{$\dom H = I$}
            \begin{proof}
                \pf\ We have $\dom R = I$ since for all $i \in I$ there exists $x$ such that $x \in H(i)$.
            \end{proof}
            \step{h}{$\forall i \in I. F(i) \in H(i)$}
            \begin{proof}
                \pf\ Since $iRF(i)$.
            \end{proof}
        \end{proof}
        \step{2}{If, for any set $I$ and any function $H$ with domain
        $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$,
        then the Axiom of Choice is true.}
        \begin{proof}
            \step{a}{\assume{For any set $I$ and any function $H$ with domain
            $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$}}
            \step{b}{\pflet{$R$ be a relation}}
            \step{c}{\pflet{$I = \dom R$}}
            \step{d}{Define the function $H$ with domain $I$ by: for $i \in I$, $H(i) = \{ y : iRy \}$}
            \step{e}{$H(i) \neq \emptyset$ for all $i \in I$}
            \step{f}{\pick\ $F \in \prod_{i \in I} H(i)$}
            \begin{proof}
                \pf\ By \stepref{a}
            \end{proof}
            \step{g}{$F$ is a function}
            \step{h}{$F \subseteq R$}
            \begin{proof}
                \pf\ For all $i \in I$ we have $F(i) \in H(i)$ and so $iRF(i)$.
            \end{proof}
            \step{i}{$\dom F = \dom R$}
        \end{proof}
        \qed
    \end{proof}

    \section{Equivalence Relations}

    \begin{definition}[Equivalence Relation]
        An \emph{equivalence relation} on $\mathbf{A}$ is a binary relation on $\mathbf{A}$
        that is reflexive on $\mathbf{A}$, symmetric and transitive.
    \end{definition}

    \begin{theorem}
        If $\mathbf{R}$ is a symmetric and transitive relation then $\mathbf{R}$ is an equivalence relation
        on $\fld \mathbf{R}$.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{\pflet{$x \in \fld \mathbf{R}$}}
        \step{2}{\pick\ $y$ such that either $x\mathbf{R}y$ or $y\mathbf{R}x$}
        \step{3}{$x\mathbf{R}y$ and $y\mathbf{R}x$}
        \begin{proof}
            \pf\ Since $\mathbf{R}$ is symmetric.
        \end{proof}
        \step{4}{$x\mathbf{R}x$}
        \begin{proof}
            \pf\ Since $\mathbf{R}$ is transitive.
        \end{proof}
        \qed
    \end{proof}

    \begin{definition}[Equivalence Class]
        If $\mathbf{R}$ is an equivalence relation and $x \in \fld \mathbf{R}$, the \emph{equivalence class}
        of $x$ modulo $\mathbf{R}$ is
        \[ [x]_{\mathbf{R}} = \{ t : x \mathbf{R} t \} \enspace . \]
    \end{definition}

    \begin{lemma}
        Assume that $\mathbf{R}$ is an equivalence relation on $\mathbf{A}$ and that $x$ and $y$ belong to
        $\mathbf{A}$. Then
        \[ [x]_{\mathbf{R}} = [y]_{\mathbf{R}} \text{ iff } x \mathbf{R} y \enspace . \]
    \end{lemma}

    \begin{proof}
        \pf
        \step{1}{If $[x]_{\mathbf{R}} = [y]_{\mathbf{R}}$ then $x\mathbf{R}y$}
        \begin{proof}
            \step{a}{\assume{$[x]_{\mathbf{R}} = [y]_{\mathbf{R}}$}}
            \step{b}{$y \in [y]_{\mathbf{R}}$}
            \begin{proof}
                \pf\ Since $\mathbf{R}$ is reflexive on $\mathbf{A}$.
            \end{proof}
            \step{c}{$y \in [x]_{\mathbf{R}}$}
            \step{d}{$x\mathbf{R}y$}
        \end{proof}
        \step{2}{If $x\mathbf{R}y$ then $[x]_{\mathbf{R}} = [y]_{\mathbf{R}}$}
        \begin{proof}
            \step{a}{\assume{$x \mathbf{R} y$}}
            \step{b}{$[y]_{\mathbf{R}} \subseteq [x]_{\mathbf{R}}$}
            \begin{proof}
                \step{i}{\pflet{$z \in [y]_{\mathbf{R}}$}}
                \step{ii}{$y\mathbf{R}z$}
                \step{iii}{$x\mathbf{R}z$}
                \begin{proof}
                    \pf\ Since $\mathbf{R}$ is transitive.
                \end{proof}
                \step{iv}{$z \in [x]_{\mathbf{R}}$}
            \end{proof}
            \step{c}{$y\mathbf{R}x$}
            \begin{proof}
                \pf\ Since $\mathbf{R}$ is symmetric.
            \end{proof}
            \step{d}{$[x]_{\mathbf{R}} \subseteq [y]_{\mathbf{R}}$}
            \begin{proof}
                \pf\ Similar.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{definition}[Partition]
        A \emph{partition} of a set $A$ is a set $P \subseteq \mathcal{P} A$ such that:
        \begin{itemize}
            \item Every member of $P$ is nonempty.
            \item Any two distinct members of $P$ are disjoint.
            \item $A = \bigcup P$
        \end{itemize}
    \end{definition}

    \begin{theorem}
        Let $R$ be an equivalence relation on the set $A$. Then the set of all equivalence classes is a
        partition of $A$.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{Every equivalence class is nonempty.}
        \begin{proof}
            \pf\ For any $x \in A$ we have $x \in [x]_R$.
        \end{proof}
        \step{2}{Any two distinct equivalence classes are disjoint.}
        \begin{proof}
            \step{a}{\pflet{$x, y \in A$}}
            \step{b}{\assume{$z \in [x]_R \cap [y]_R$} \prove{$[x]_R = [y]_R$}}
            \step{c}{$xRy$}
            \begin{proof}
                \step{i}{$xRz$}
                \step{ii}{$yRz$}
                \step{iii}{$zRy$}
                \begin{proof}
                    \pf\ By \stepref{ii} and symmetry.
                \end{proof}
                \step{iv}{$xRy$}
                \begin{proof}
                    \pf\ By \stepref{i}, \stepref{iii} and transitivity.
                \end{proof}
            \end{proof}
            \step{d}{$[x]_R = [y]_R$}
            \begin{proof}
                \pf\ By Lemma 3N.
            \end{proof}
        \end{proof}
        \step{3}{$A$ is the union of all the equivalence classes.}
        \begin{proof}
            \pf\ For any $x \in A$ we have $x \in [x]_R$.
        \end{proof}
        \qed
    \end{proof}

    \begin{definition}[Quotient Set]
        If $R$ is an equivalence relation on the set $A$, then the \emph{quotient set} $A / R$
        is the set of all equivalence classes, and the \emph{natural map} or \emph{canonical map}
        $\phi : A \rightarrow A/R$ is defined by $\phi(x) = [x]_R$.
    \end{definition}

    \begin{theorem}
        Assume that $R$ is an equivalence relation on $A$ and that $F : A \rightarrow B$.
        Assume that $F$ is \emph{compatible} with $R$; that is, whenever $xRy$, then $F(x) = F(y)$.
        Then there exists a unique $\overline{F} : A / R \rightarrow B$ such that $F = \overline{F} \circ \phi$.
    \end{theorem}

    \begin{proof}
        \pf\ The unique such $\overline{F}$ is $\{ ([x],F(x)) : x \in A \}$. \qed
    \end{proof}

    \section{Linear Orders}

    \begin{definition}[Linear Ordering]
        Let $\mathbf{A}$ be a class. A \emph{linear ordering} or \emph{total ordering} on $\mathbf{A}$
        is a relation $\mathbf{R}$ on $\mathbf{A}$ such that:
        \begin{itemize}
            \item $\mathbf{R}$ is transitive.
            \item $\mathbf{R}$ satisfies \emph{trichotomy} on $\mathbf{A}$; i.e. for any $x, y \in \mathbf{A}$,
            exactly one of
            \[ x\mathbf{R}y, x=y, y\mathbf{R}x \]
            holds.
        \end{itemize}
    \end{definition}

    \begin{theorem}
        Let $\mathbf{R}$ be a linear ordering on $\mathbf{A}$.
        \begin{enumerate}
            \item There is no $x$ such that $x \mathbf{R} x$.
            \item For distinct $x$ and $y$ in $\mathbf{A}$, either $x\mathbf{R}y$ or $y\mathbf{R}x$.
        \end{enumerate}
    \end{theorem}

    \begin{proof}
        \pf\ Immediate from trichotomy. \qed
    \end{proof}

    \begin{definition}[Strictly Monotone Functions]
        Let $A$ and $B$ be linearly ordered sets. A function $f : A \rightarrow B$ is \emph{strictly
        monotone} iff, for all $x, y \in A$, if $x < y$ then $f(x) < f(y)$.
    \end{definition}

    \begin{theorem}
        Let $A$ and $B$ be linearly ordered sets and $f : A \rightarrow B$ be strictly monotone.
        For all $x, y \in A$, if $f(x) < f(y)$ then $x < y$.
    \end{theorem}

    \begin{proof}
        \pf\ We have $f(x) \neq f(y)$ and $f(y) \not < f(x)$ by trichotomy, hence $x \neq y$ and $y \not < x$
        since $f$ is strictly monotone, hence $x < y$ by trichotomy. \qed
    \end{proof}

    \begin{theorem}
        Every strictly monotone function is injective.
    \end{theorem}

    \begin{proof}
        \pf\ If $f(x) = f(y)$, then we have $f(x) \not < f(y)$ and $f(y) \not < f(x)$ by trichotomy,
        hence $x \not < y$ and $y \not < x$ since $f$ is strictly monotone, hence $x = y$ by
        trichotomy. \qed
    \end{proof}
    \section{Natural Numbers}

    \begin{definition}[Successor]
        The \emph{successor} of a set $a$ is the set $a^+ = a \cup \{ a \}$.
    \end{definition}

    \begin{definition}[Inductive]
        A class $\mathbf{A}$ is \emph{inductive} iff $\emptyset \in \mathbf{A}$ and
        $\forall a \in \mathbf{A}. a^+ \in \mathbf{A}$.
    \end{definition}

    \begin{axiom}[Infinity]
        There exists an inductive set.
    \end{axiom}

    \begin{definition}[Natural Number]
        A \emph{natural number} is a set that belongs to every inductive set.

        We write $\omega$ for the class of all natural numbers.
    \end{definition}

    \begin{theorem}
        The class $\omega$ is a set.
    \end{theorem}

    \begin{proof}
        \pf\ Pick an inductive set $I$ (by the Axiom of Infinity), then apply a Subset Axiom to $I$. \qed
    \end{proof}

    \begin{theorem}
        The set $\omega$ is inductive, and is a subset of every inductive set.
    \end{theorem}

    \begin{proof}
        \pf\ Easy. \qed
    \end{proof}

    \begin{corollary}[Proof by Induction]
        Any inductive subclass of $\omega$ is equal to $\omega$.
    \end{corollary}

    \begin{theorem}
        Every natural number except 0 is the successor of some natural number.
    \end{theorem}

    \begin{proof}
        \pf\ Easy proof by induction. \qed
    \end{proof}

    \begin{definition}[Peano System]
        A \emph{Peano system} is a triple $\langle N, S, e \rangle$ consisting of a set $N$,
        a function $S : N \rightarrow N$ and an element $e \in N$ such that:
        \begin{enumerate}
            \item $e \notin \ran S$
            \item $S$ is one-to-one
            \item Any subset $A \subseteq N$ that contains $e$ and is closed under $S$ equals $N$.
        \end{enumerate}
    \end{definition}

    \begin{definition}[Transitive Set]
        A set $A$ is a \emph{transitive set} iff every member of a member of $A$ is a member of $A$.
    \end{definition}

    \begin{theorem}
        \label{theorem:union_transitive_successor}
        For any transitive set $a$, $\bigcup (a^+) = a$.
    \end{theorem}

    \begin{proof}
        \pf
        \begin{align*}
            \bigcup (a^+) & = \bigcup (a \cup \{ a \}) \\
            & = \bigcup a \cup \bigcup \{a\} \\
            & = \bigcup a \cup a \\
            & = a
        \end{align*}
        since $\bigcup a \subseteq a$. \qed
    \end{proof}

    \begin{theorem}
        \label{theorem:natural_number_transitive}
        Every natural number is a transitive set.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{0 is a transitive set.}
        \begin{proof}
            \pf\ Vacuous.
        \end{proof}
        \step{2}{For any natural number $n$, if $n$ is a transitive set then $n^+$ is a transitive set.}
        \begin{proof}
            \step{a}{\pflet{$n$ be a natural number that is a transitive set.}}
            \step{b}{$\bigcup (n^+) \subseteq n^+$}
            \begin{proof}
                \pf\ Theorem \ref{theorem:union_transitive_successor}.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{theorem}
        $\langle \omega, \sigma, 0 \rangle$ is a Peano system, where $0 = \emptyset$ and 
        $\sigma = \{ \langle n, n^+ \rangle : n \in \omega \}$.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{$0 \notin \ran \sigma$}
        \begin{proof}
            \pf\ For any $n \in \omega$ we have $0 \neq n^+$ since $n \in n^+$
            and $n \notin 0$.
        \end{proof}
        \step{2}{$\sigma$ is one-to-one.}
        \begin{proof}
            \pf\ If $m^+ = n^+$ then $m = \bigcup (m^+) = \bigcup (n^+) = n$ using Theorems
            \ref{theorem:union_transitive_successor} and \ref{theorem:natural_number_transitive}.
        \end{proof}
        \step{3}{Any subset $A \subseteq \omega$ that contains 0 and is closed under $\sigma$ equals $\omega$.}
        \qed
    \end{proof}

    \begin{theorem}
        The set $\omega$ is a transitive set.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{For every natural number $n$ we have $\forall m \in n$. $m$ is a natural number.}
        \begin{proof}
            \step{a}{$\forall m \in 0$. $m$ is a natural number.}
            \begin{proof}
                \pf\ Vacuous.
            \end{proof}
            \step{b}{If $n$ is a natural number and $\forall m \in n$. $m$ is a natural number, then
            $\forall m \in n^+$. $m$ is a natural number.}
            \begin{proof}
                \pf\ Since if $m \in n^+$ we have either $m \in n$ or $m = n$, and $m$ is a natural number
                in either case.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{theorem}[Recursion Theorem on $\omega$]
        Let $A$ be a set, $a \in A$ and $F : A \rightarrow A$. Then there exists a unique function
        $h : \omega \rightarrow A$ such that
        \[ h(0) = a \enspace , \]
        and for every $n$ in $\omega$,
        \[ h(n^+) = F(h(n)) \enspace . \]
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{Let us call a function $v$ \emph{acceptable} iff $\dom v \subseteq \omega$,
        $\ran v \subseteq A$ and:
        \begin{enumerate}
            \item If $0 \in \dom v$ then $v(0) = a$
            \item For all $n \in \omega$, if $n^+ \in \dom v$ then $n \in \dom v$ and $v(n^+) = F(v(n))$.
        \end{enumerate}}
        \step{2}{\pflet{$\mathcal{K}$ be the set of acceptable functions.}}
        \step{3}{\pflet{$h = \bigcup \mathcal{K}$}}
        \step{4}{$h$ is a function.}
        \begin{proof}
            \step{a}{\pflet{$S = \{ n \in \omega : \text{for at most one } y, (n,y) \in h \}$}}
            \step{b}{$S$ is inductive.}
            \begin{proof}
                \step{i}{$0 \in S$}
                \begin{proof}
                    \step{one}{\pflet{$\langle 0, y_1 \rangle, \langle 0, y_2 \rangle \in h$}}
                    \step{two}{\pick\ acceptable $v_1$ and $v_2$ such that $v_1(0) = y_1$ and $v_2(0) = y_2$}
                    \step{three}{$y_1 = a$}
                    \step{four}{$y_2 = a$}
                    \step{five}{$y_1 = y_2$}
                \end{proof}
                \step{ii}{$\forall k \in S. k^+ \in S$}
                \begin{proof}
                    \step{one}{\pflet{$k \in S$}}
                    \step{two}{\pflet{$(k^+,y_1),(k^+,y_2) \in h$}}
                    \step{three}{\pick\ acceptable $v_1$, $v_2$ such that $v_1(k^+)=y_1$ and $v_2(k^+)=y_2$}
                    \step{four}{$y_1 = F(v_1(k))$}
                    \step{five}{$f_2 = F(v_2(k))$}
                    \step{six}{$v_1(k) = v_2(k)$}
                    \begin{proof}
                        \step{A}{$(k,v_1(k)), (k,v_2(k)) \in h$}
                        \qedstep
                        \begin{proof}
                            \pf\ By \stepref{one}
                        \end{proof}
                    \end{proof}
                    \step{seven}{$y_1 = y_2$}
                \end{proof}
            \end{proof}
            \step{c}{$S = \omega$}
        \end{proof}
        \step{5}{$h$ is acceptable.}
        \begin{proof}
            \step{a}{If $0 \in \dom h$ then $h(0)= a$}
            \begin{proof}
                \step{i}{\assume{$0 \in \dom h$}}
                \step{ii}{\pick\ $v$ acceptable with $v(0) = h(0)$}
                \step{iii}{$v(0) = a$}
                \step{iv}{$h(0) = a$}
            \end{proof}
            \step{b}{For all $n \in \omega$, if $n^+ \in \dom h$ then $n \in \dom h$ and $h(n^+) = F(h(n))$}
            \begin{proof}
                \step{i}{\pflet{$n \in \omega$ with $n^+ \in \dom h$}}
                \step{ii}{\pick\ $v$ acceptable with $v(n^+) = h(n^+)$}
                \step{iii}{$n \in \dom v$}
                \step{iv}{$v(n) = h(n)$}
                \step{v}{$h(n^+) = F(h(n))$}
                \begin{proof}
                    \pf
                    \begin{align*}
                        h(n^+) & = v(n^+) \\
                        & = F(v(n)) \\
                        & = F(h(n))
                    \end{align*}
                \end{proof}
            \end{proof}
        \end{proof}
        \step{6}{$\dom h = \omega$}
        \begin{proof}
            \step{a}{$0 \in \dom h$}
            \begin{proof}
                \pf\ Since $\{ (0,a) \}$ is an acceptable function.
            \end{proof}
            \step{b}{$\forall n \in \dom h. n^+ \in \dom h$}
            \begin{proof}
                \step{i}{\pflet{$n \in \dom h$}}
                \step{ii}{\pick\ an acceptable $v$ such that $n \in \dom v$}
                \step{iii}{\assume{w.l.o.g. $n^+ \notin \dom v$}}
                \step{iv}{$v \cup \{ (n^+, F(v(n))) \}$ is acceptable.}
            \end{proof}
        \end{proof}
        \step{7}{For any acceptable function $h' : \omega \rightarrow A$ we have $h' = h$}
        \begin{proof}
            \step{a}{\pflet{$h' : \omega \rightarrow A$ be acceptable.}}
            \step{b}{$h'(0) = h(0)$}
            \begin{proof}
                \pf\ $h'(0) = h(0) = a$
            \end{proof}
            \step{c}{$\forall n \in \omega. h'(n) = h(n) \Rightarrow h'(n^+) = h(n^+)$}
            \begin{proof}
                \pf\ We have $h'(n^+) = F(h'(n)) = F(h(n)) = h(n^+)$.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{theorem}
        Let $(N,S,e)$ be a Peano system. Then $(\omega, \sigma, 0)$ is isomorphic to $(N,S,e)$, i.e. there is
        a function $h$ mapping $\omega$ one-to-one onto $N$ in a way that preserves the successor operation
        \[ h(\sigma(n)) = S(h(n)) \]
        and the zero element
        \[ h(0) = e \enspace . \]
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{There exists a function $h$ that satisfies those two conditions.}
        \begin{proof}
            \pf\ By the Recursion Theorem.
        \end{proof}
        \step{2}{For all $m,n \in \omega$, if $m \neq n$ then $h(m) \neq h(n)$}
        \begin{proof}
            \step{a}{For all $n \in \omega$, if $n \neq 0$ then $h(n) \neq h(0)$}
            \begin{proof}
                \step{i}{\pflet{$n \in \omega$}}
                \step{ii}{\assume{$n \neq 0$}}
                \step{iii}{\pick\ $p$ such that $n = p^+$}
                \step{iv}{$h(n) \neq h(0)$}
                \begin{proof}
                    \pf\ $h(n) = S(h(p)) \neq e = h(0)$.
                \end{proof}
            \end{proof}
            \step{b}{For all $m \in \omega$, if $\forall n(m \neq n \Rightarrow h(m) \neq h(n))$
            then $\forall n(m^+ \neq n \Rightarrow h(m^+) \neq h(n))$}
            \begin{proof}
                \step{i}{\pflet{$m \in \omega$}}
                \step{ii}{\assume{$\forall n(m \neq n \Rightarrow h(m) \neq h(n))$}}
                \step{iii}{\pflet{$n \in \omega$}}
                \step{iv}{\assume{$m^+ \neq n$} \prove{$h(m^+) \neq h(n)$}}
                \step{v}{\case{$n = 0$}}
                \begin{proof}
                    \pf\ $h(m^+) = S(h(m)) \neq e = h(n)$
                \end{proof}
                \step{vi}{\case{$n = p^+$}}
                \begin{proof}
                    \step{one}{$m \neq p$}
                    \step{two}{$h(m) \neq h(p)$}
                    \step{three}{$S(h(m)) \neq S(h(p))$}
                    \step{four}{$h(m^+) \neq h(p^+)$}
                \end{proof}
            \end{proof}
        \end{proof}
        \step{3}{For all $x \in N$, there exists $n \in \omega$ such that $h(n) = x$}
        \begin{proof}
            \pf\ An easy induction on $x$.
        \end{proof}
        \qed
    \end{proof}
    
    \section{Arithmetic}

    \begin{definition}[Addition]
        \emph{Addition} $+$ is the binary operation on $\omega$ such that, for all $m,n \in \omega$,
        \begin{align*}
            m + 0 & = m \\
            m + n^+ & = (m + n)^+
        \end{align*}
    \end{definition}

    \begin{theorem}[Associative Law for Addition]
        \[ \forall m,n,p \in \omega. m + (n + p) = (m + n) + p \]
    \end{theorem}

    \begin{proof}
        \pf
        \[ m + (n + 0) = m + n = (m + n) + 0 \]
        If $m + (n + p) = (m + n) + p$ then
        \begin{align*}
            m + (n + p^+) & = m + (n + p)^+ \\
            & = (m + (n + p))^+ \\
            & = ((m + n) + p)^+ \\
            & = (m + n) + p^+ & \qed
        \end{align*}
    \end{proof}

    \begin{theorem}[Commutative Law for Addition]
        \[ \forall m,n \in \omega. m + n = n + m \]
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{$\forall n \in \omega. 0 + n = n + 0$}
        \begin{proof}
            \step{a}{$0 + 0 = 0 + 0$}
            \step{b}{For all $n \in \omega$, if $0 + n = n + 0$ then $0 + n^+ = n^+ + 0$}
            \begin{proof}
                \pf
                \begin{align*}
                    0 + n^+ & = (0 + n)^+ \\
                    & = n^+ & (\text{induction hypothesis}) \\
                    & = n^+ + 0
                \end{align*}
            \end{proof}
        \end{proof}
        \step{2}{For all $m \in \omega$, if $\forall n. m + n = n + m$ then $\forall n. m^+ + n = n + m^+$}
        \begin{proof}
            \step{a}{\pflet{$m \in \omega$}}
            \step{b}{\assume{$\forall n. m + n = n + m$}}
            \step{c}{$m^+ + 0 = 0 + m^+$}
            \begin{proof}
                \pf\ From \stepref{1}
            \end{proof}
            \step{d}{For all $n \in \omega$, if $m^+ + n = n + m^+$ then $m^+ + n^+ = n^+ + m^+$}
            \begin{proof}
                \pf
                \begin{align*}
                    m^+ + n^+ & = (m^+ + n)^+ \\
                    & = (n + m^+)^+ \\
                    & = (n + m)^{++} \\
                    & = (m + n)^{++} & (\text{\stepref{b}})\\
                    & = (m + n^+)^+ \\
                    & = (n^+ + m)^+ & (\text{\stepref{b}})\\
                    & = n^+ + m^+
                \end{align*}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{definition}[Multiplication]
        \emph{Multiplication} $\cdot$ is the binary operation on $\omega$ such that, for all $m, n \in \omega$,
        \begin{align*}
            m0 & = 0 \\
            m \cdot n^+ & = mn + m
        \end{align*}
    \end{definition}

    \begin{theorem}[Distributive Law]
        \[ \forall m,n,p \in \omega. m(n+p) = mn + mp \]
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{$\forall m,n \in \omega. m(n+0) = mn+m0$}
        \begin{proof}
            \pf
            \begin{align*}
                m(n+0) & = mn \\
                & = mn+0 \\
                & = mn+m0
            \end{align*}
        \end{proof}
        \step{2}{For all $p \in \omega$, if $m(n+p) = mn+mp$ then $m(n+p^+) = mn + mp^+$}
        \begin{proof}
            \pf
            \begin{align*}
                m(n+p^+) & = m(n+p)^+ \\
                & = m(n+p) + m \\
                & = (mn + mp) + m \\
                & = mn + (mp + m) & (\text{Associative Law for Addition}) \\
                & = mn + mp^+
            \end{align*}
        \end{proof}
        \qed
    \end{proof}

    \begin{theorem}[Associative Law for Multiplication]
        \[ \forall m,n,p \in \omega. m(np) = (mn)p \]
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{$\forall m,n \in \omega. m(n0) = (mn)0$}
        \begin{proof}
            \pf\ Both are equal to 0.
        \end{proof}
        \step{2}{For all $m,n,p \in \omega$, if $m(np) = (mn)p$ then $m(np^+) = (mn)p^+$}
        \begin{proof}
            \pf
            \begin{align*}
                m(np^+) & = m(np + n) \\
                & = m(np) + mn & (\text{Distributive Law}) \\
                & = (mn)p + mn \\
                & = (mn)p^+
            \end{align*}
        \end{proof}
        \qed
    \end{proof}

    \begin{theorem}[Commutative Law for Multiplication]
        \[ \forall m,n \in \omega. mn=nm \]
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{$\forall n \in \omega. 0n = n0$}
        \begin{proof}
            \step{a}{$0 \cdot 0 = 0 \cdot 0$}
            \step{b}{For all $n \in \omega$, if $0n = n0$ then $0n^+ = n^+ 0$}
            \begin{proof}
                \pf
                \begin{align*}
                    0n^+ & = 0n + 0 \\
                    & = 0n \\
                    & = n0 \\
                    & = 0 \\
                    & = n^+ 0
                \end{align*}
            \end{proof}
        \end{proof}
        \step{2}{For all $m \in \omega$, if $\forall n \in \omega.mn=nm$ then $\forall n \in \omega.
        m^+n = nm^+$}
        \begin{proof}
            \step{a}{\pflet{$m \in \omega$}}
            \step{b}{\assume{$\forall n \in \omega. mn=nm$}}
            \step{c}{$m^+ 0 = 0 m^+$}
            \begin{proof}
                \pf\ By \stepref{1}.
            \end{proof}
            \step{d}{For all $n \in \omega$, if $m^+ n = n m^+$ then $m^+ n^+ = n^+ m^+$}
            \begin{proof}
                \pf
                \begin{align*}
                    m^+ n^+ & = m^+ n + m^+ \\
                    & = (m^+ n + m)^+ \\
                    & = (nm^+ + m)^+ \\
                    & = (nm + n + m)^+ \\
                    & = (mn + n + m)^+ & (\text{\stepref{b}}) \\
                    & = (mn + m + n)^+ & (\text{Associative and Commutative Laws for Addition}) \\
                    & = (mn^+ + n)^+ \\
                    & = (n^+ m + n)^+ & (\text{\stepref{b}}) \\
                    & = n^+ m + n^+ \\
                    & = n^+ m^+
                \end{align*}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \section{Ordering on the Natural Numbers}

    \begin{lemma}
        \label{lemma:natural_number_order_successor}
        For any natural numbers $m$ and $n$, $m \in n$ if and only if $m^+ \in n^+$.
    \end{lemma}

    \begin{proof}
        \pf
        \step{1}{$\forall m,n \in \omega (m \in n \Rightarrow m^+ \in n^+)$}
        \begin{proof}
            \step{a}{$\forall m \in \omega (m \in 0 \Rightarrow m^+ \in 0^+)$}
            \begin{proof}
                \pf\ Vacuous.
            \end{proof}
            \step{b}{For all $n \in \omega$, if $\forall m \in n. m^+ \in n^+$ then
            $\forall m \in n^+. m^+ \in n^{++}$}
            \begin{proof}
                \step{i}{\pflet{$n \in \omega$}}
                \step{ii}{\assume{$\forall m \in n. m^+ \in n^+$}}
                \step{iii}{\pflet{$m \in n^+$}}
                \step{iv}{\case{$m \in n$}}
                \begin{proof}
                    \step{one}{$m^+ \in n^+$}
                    \begin{proof}
                        \pf\ By \stepref{ii}
                    \end{proof}
                    \step{two}{$m^+ \in n^{++}$}
                \end{proof}
                \step{v}{\case{$m = n$}}
                \begin{proof}
                    \pf\ $m^+ = n^+ \in n^{++}$
                \end{proof}
            \end{proof}
        \end{proof}
        \step{2}{$\forall m,n \in \omega (m^+ \in n^+ \Rightarrow m \in n)$}
        \begin{proof}
            \step{a}{\pflet{$m, n \in \omega$}}
            \step{b}{\assume{$m^+ \in n^+$}}
            \step{c}{$m \in m^+$}
            \step{d}{$m^+ \in n$ or $m^+ = n$}
            \step{e}{$m \in n$}
            \begin{proof}
                \pf\ If $m^+ \in n$ this follows because $n$ is transitive (Theorem \ref{theorem:natural_number_transitive}).
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{lemma}
        \label{lemma:natural_number_irreflexive}
        For any natural number $n$ we have $n \notin n$.
    \end{lemma}

    \begin{proof}
        \pf
        \step{1}{$0 \notin 0$}
        \step{2}{For all $n \in \omega$, if $n \notin n$ then $n^+ \notin n^+$}
        \begin{proof}
            \step{a}{\pflet{$n \in \omega$}}
            \step{c}{\assume{$n^+ \in n^+$} \prove{$n \in n$}}
            \step{d}{$n^+ \in n$ or $n^+ = n$}
            \step{e}{$n \in n^+$}
            \step{f}{$n \in n$}
            \begin{proof}
                \pf\ If $n^+ \in n$ this follows because $n$ is transitive (Theorem \ref{theorem:natural_number_transitive}).
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{theorem}[Trichotomy Law for $\omega$]
        For any natural numbers $m$ and $n$, exactly one of
        \[ m \in n, m = n, n \in m \]
        holds.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{For any $m, n \in \omega$, at most one of $m \in n$, $m = n$, $n \in m$ holds.}
        \begin{proof}
            \pf\ If $m \in n$ and $m = n$ then $m \in m$ contradicting Lemma \ref{lemma:natural_number_irreflexive}.

            If $m \in n$ and $n \in m$ then $m \in m$ by Theorem \ref{theorem:natural_number_transitive},
            contradicting Lemma \ref{lemma:natural_number_irreflexive}.
        \end{proof}
        \step{2}{For any $m, n \in \omega$, at least one of $m \in n$, $m = n$, $n \in m$ holds.}
        \begin{proof}
            \step{a}{For all $n \in \omega$, either $0 \in n$ or $0 = n$}
            \begin{proof}
                \step{i}{$0 = 0$}
                \step{ii}{For all $n \in \omega$, if $0 \in n$ or $0 = n$ then $0 \in n^+$}
            \end{proof}
            \step{b}{For all $m \in \omega$, if $\forall n \in \omega (m \in n \vee m = n \vee n \in m)$
            then $\forall n \in \omega (m^+ \in n \vee m^+ = n \vee n \in m^+)$}
            \begin{proof}
                \step{i}{\pflet{$m \in \omega$}}
                \step{ii}{\assume{$\forall n \in \omega (m\in n \vee m = n \vee n \in m)$}}
                \step{iii}{\pflet{$n \in \omega$}}
                \step{iv}{\case{$m \in n$}}
                \begin{proof}
                    \pf\ Then $m \in n^+$
                \end{proof}
                \step{v}{\case{$m = n$}}
                \begin{proof}
                    \pf\ Then $m \in n^+$
                \end{proof}
                \step{vi}{\case{$n \in m$}}
                \begin{proof}
                    \pf\ Then $n^+ \in m^+$ by Lemma \ref{lemma:natural_number_order_successor}
                    so $n^+ \in m$ or $n^+ = m$.
                \end{proof}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{corollary}
        The relation $\in$ is a linear ordering on $\omega$.    
    \end{corollary}

    \begin{corollary}
        For any natural numbers $m$ and $n$,
        \[ m \in n \Leftrightarrow m \subset n \enspace . \]
    \end{corollary}

    \begin{proof}
        \pf
        \step{1}{\pflet{$m, n \in \omega$}}
        \step{2}{If $m \in n$ then $m \subset n$.}
        \begin{proof}
            \step{a}{\assume{$m \in n$}}
            \step{b}{$m \subseteq n$}
            \begin{proof}
                \pf\ Theorem \ref{theorem:natural_number_transitive}.
            \end{proof}
            \step{c}{$m \neq n$}
            \begin{proof}
                \pf\ Lemma \ref{lemma:natural_number_irreflexive}.
            \end{proof}
        \end{proof}
        \step{3}{If $m \subset n$ then $m \in n$.}
        \begin{proof}
            \pf\ We have $m \neq n$ and $n \notin m$ by \stepref{2}, hence $m \in n$ by trichotomy.
        \end{proof}
        \qed
    \end{proof}

    \begin{theorem}
        \label{theorem:addition_strictly_monotone}
        For any natural number $p$, the function that maps $n$ to $n + p$ is strictly monotone.
        For any natural numbers $m$, $n$ and $p$, we have $m \in n$ if and only if $m + p \in n + p$.
    \end{theorem}

    \begin{proof}
        \pf\ We prove that $m \in n \Rightarrow m + p \in n + p$. This is an easy induction on $p$ using
        Lemma \ref{lemma:natural_number_order_successor}. \qed
    \end{proof}

    \begin{theorem}
        For any non-zero natural number $p$, the function that maps $n$ to $np$ is strictly monotone.
    \end{theorem}

    \begin{proof}
        \pf\ Easy induction on $p$ using Theorem \ref{theorem:addition_strictly_monotone}. \qed
    \end{proof}

    \begin{theorem}[Strong Induction]
        Let $A$ be a subset of $\omega$ and suppose that, for all $n \in \omega$, we have
        \[ (\forall m < n. m \in A) \Rightarrow n \in A \enspace . \]
        Then $A = \omega$.
    \end{theorem}

    \begin{proof}
        \pf\ Prove $\forall n \in \omega. \forall m < n. m \in A$ by induction on $n$. \qed
    \end{proof}
    
    \begin{theorem}[Well-Ordering of $\omega$]
        Every nonempty subset of $\omega$ has a least element.
    \end{theorem}
    
    \begin{proof}
        \pf\ If $A$ is a subset of $\omega$ with no least element, we prove $\forall n \in \omega. n \notin A$
        by strong induction on $n$. \qed
    \end{proof}

    \begin{corollary}
        There is no function $f : \omega \rightarrow \omega$ such that $f(n+1) < f(n)$ for every $n$.
    \end{corollary}

    \section{The Integers}

    \begin{theorem}
        The relation $\sim$ is an equivalence relation on $\omega \times \omega$, where $(m,n) \sim (p,q)$ iff
        $m + q = n + p$.
    \end{theorem}

    \begin{proof}
        \pf
        \step{1}{The relation $\sim$ is reflexive on $\omega^2$}
        \begin{proof}
            \pf\ For any $m$, $n$, we have $m + n = m + n$ and so $(m,n) \sim (m,n)$.
        \end{proof}
        \step{2}{The relation $\sim$ is symmetric.}
        \begin{proof}
            \pf\ If $m + q = n + p$ then $p + n = q + m$.
        \end{proof}
        \step{3}{The relation $\sim$ is transitive.}
        \begin{proof}
            \step{a}{\assume{$(m,n) \sim (p,q) \sim (r,s)$}}
            \step{b}{$m + q = n + p$}
            \step{c}{$p + s = q + r$}
            \step{d}{$m + p + q + s = n + p + q + r$}
            \step{d}{$m + s = n + r$}
            \begin{proof}
                \pf\ By cancellation of addition in $\omega$.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \begin{definition}
        The set $\mathbb{Z}$ of \emph{integers} is the quotient set $(\omega \times \omega) / \sim$.
    \end{definition}
\end{document}