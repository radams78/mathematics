\documentclass{report}

\title{Solutions Manual for Enderton \emph{Elements of Set Theory}}
\author{Robin Adams}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{pf2}

\newcommand{\dom}{\ensuremath{\operatorname{dom}}}
\newcommand{\ran}{\ensuremath{\operatorname{ran}}}
\newcommand{\fld}{\ensuremath{\operatorname{fld}}}
\newcommand{\inv}[1]{\ensuremath{{#1}^{-1}}}

\begin{document}
    \maketitle
    \tableofcontents

    \chapter{Chapter 1 --- Introduction}

    \section{Baby Set Theory}

    \paragraph{Exercise 1}
    \begin{itemize}
        \item $\{ \emptyset \} \in \{ \emptyset, \{ \emptyset \} \}$ --- true
        \item $\{ \emptyset \} \subseteq \{ \emptyset, \{ \emptyset \} \}$ --- true
        \item $\{ \emptyset \} \in \{ \emptyset, \{ \{ \emptyset \} \} \}$ --- false
        \item $\{ \emptyset \} \subseteq \{ \emptyset, \{ \{ \emptyset \} \} \}$ --- true
        \item $\{ \{ \emptyset \} \} \in \{ \emptyset, \{ \emptyset \} \}$ --- false
        \item $\{ \{ \emptyset \} \} \subseteq \{ \emptyset, \{ \emptyset \} \}$ --- true
        \item $\{ \{ \emptyset \} \} \in \{ \emptyset, \{ \{ \emptyset \} \} \}$ --- true
        \item $\{ \{ \emptyset \} \} \subseteq \{ \emptyset, \{ \{ \emptyset \} \} \}$ --- false
        \item $\{ \{ \emptyset \} \} \in \{ \emptyset, \{ \emptyset, \{ \emptyset \} \} \}$ --- false
        \item $\{ \{ \emptyset \} \} \subseteq \{ \emptyset, \{ \emptyset, \{ \emptyset \} \} \}$ --- false
    \end{itemize}

    \paragraph{Exercise 2}
    We have $\emptyset \neq \{ \emptyset \}$ because $\{ \emptyset \}$ has an element (namely $\emptyset$)
    while $\emptyset$ has no elements.

    We have $\emptyset \neq \{ \{ \emptyset \} \}$ because $\{ \{ \emptyset \} \}$ has an element (namely
    $\{ \emptyset \}$) while $\emptyset$ has no elements.

    We have $\{ \emptyset \} \neq \{ \{ \emptyset \} \}$ because $\emptyset \in \{ \emptyset \}$ but
    $\emptyset \notin \{ \{ \emptyset \} \}$. This last fact is true because $\emptyset \neq \{ \emptyset \}$
    as we proved in the first paragraph.

    \paragraph{Exercise 3}
    Assume $B \subseteq C$. Let $A \in \mathcal{P} B$; we must show that $A \in \mathcal{P} C$.

    We have $A \subseteq B$ (since $A \in \mathcal{P} B$) and $B \subseteq C$. From this it follows that
    $A \subseteq C$ (every element of $A$ is an element of $B$; every element of $B$ is an element of $C$;
    therefore every element of $A$ is an element of $C$). Hence $A \in \mathcal{P} C$ as required.

    \paragraph{Exercise 4}
    Since $x \in B$, we have $\{x\} \subseteq B$ and so $\{ x \} \in \mathcal{P} B$.

    Since $x \in B$ and $y \in B$, we have $\{ x,y \} \subseteq B$ and so $\{x,y\} \in \mathcal{P} B$.

    From these two facts, it follows that $\{ \{x\},\{x,y\}\} \subseteq \mathcal{P} B$ and so
    $\{ \{x\},\{x,y\}\} \in \mathcal{P} \mathcal{P} B$.

    \section{Sets --- An Informal View}

    \paragraph{Exercise 5}
    We have
    \begin{align*}
        V_0 & = A \\
        V_1 & = V_0 \cup \mathcal{P} V_0 \\
        & = A \cup \mathcal{P} A \\
        V_2 & = V_1 \cup \mathcal{P} V_1 \\
        & = \{ \emptyset, \{ \emptyset \} \} \\
        V_3 & = \mathcal{P} V_2 \\
        & = \{ \emptyset, \{ \emptyset \}, \{ \{ \emptyset \} \},
        \{ \emptyset, \{ \emptyset \} \} \}
    \end{align*}

    We have $\emptyset \subseteq V_0$ and so $\emptyset \in V_1$. Therefore $\{ \emptyset \} \subseteq V_1$
    and so $\{ \emptyset \} \in V_2$. Hence
    $\{ \{ \emptyset \} \} \subseteq V_2$.

    We also have $\{ \{ \emptyset \} \} \nsubseteq V_0$ because $\{ \emptyset \}$ is not an atom,
    and $\{ \{ \emptyset \} \} \nsubseteq V_1$ since $\{ \emptyset \} \notin V_1$ because $\emptyset$ is not an atom.

    Thus the rank of $\{ \{ \emptyset \} \}$ is 2.

    Likewise we have $\emptyset$ and $\{ \emptyset \}$ are both subsets of $V_1$, hence
    \[ \emptyset \in V_2, \qquad \{ \emptyset \} \in V_2 \]
    Thus $\emptyset, \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \}$ are all subsets of $V_2$,
    hence elements of $V_3$. Therefore,
    \[ \{ \emptyset, \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \} \} \subseteq V_3 \]

    Now, $\{ \emptyset, \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \} \}$ is not a subset of $V_0$
    (because $\emptyset$ is not an atom.) It is not a subset of $V_1$ ($\{ \emptyset \} \notin V_1$
    because $\emptyset$ is not an atom.) It is not a subset of $V_2$ (we have
    $\{ \emptyset, \{ \emptyset \} \} \notin V_2$ since $\{ \emptyset \} \notin V_1$).

    Therefore the rank of
    $\{ \emptyset, \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \} \}$ is 3.
    
    \paragraph{Exercise 6}

    \begin{align*}
        V_1 & = V_0 \cup \mathcal{P} V_0 \\
        & = A \cup \mathcal{P} V_0 & (\text{since } V_0 = A) \\
        V_2 & = V_1 \cup \mathcal{P} V_1 \\
        & = A \cup \mathcal{P} V_0 \cup \mathcal{P} V_1 \\
        & = A \cup \mathcal{P} V_1 & (\text{since } \mathcal{P} V_0 \subseteq \mathcal{P} V_1 \text{ by Exercise 3}) \\
        V_3 & = V_2 \cup \mathcal{P} V_2 \\
        & = A \cup \mathcal{P} V_1 \cup \mathcal{P} V_2 \\
        & = A \cup \mathcal{P} V_2 & (\text{since } \mathcal{P} V_1 \subseteq \mathcal{P} V_2 \text{ by Exercise 3}) \\
        V_4 & = V_3 \cup \mathcal{P} V_3 \\
        & = A \cup \mathcal{P} V_2 \cup \mathcal{P} V_3 \\
        & = A \cup \mathcal{P} V_3 & (\text{since } \mathcal{P} V_2 \subseteq \mathcal{P} V_3 \text{ by Exercise 3}) \\        
    \end{align*}

    \paragraph{Exercise 7}
    In Exercise 5 we calculated $V_3 = \{ \emptyset, \{ \emptyset \}, \{ \{ \emptyset \} \},
    \{ \emptyset, \{ \emptyset \} \} \}$

    Hence
    \begin{align*}
    V_4 = & \mathcal{P} V_3 \\
    = \{ & \emptyset, \\
    & \{ \emptyset \}, \\
    & \{ \{ \emptyset \} \}, \\
    & \{ \{ \{ \emptyset \} \} \}, \\
    & \{ \{ \emptyset, \{ \emptyset \} \} \}, \\
    & \{ \emptyset, \{ \emptyset \} \}, \\
    & \{ \emptyset, \{ \{ \emptyset \} \} \}, \\
    & \{ \emptyset, \{ \emptyset, \{ \emptyset \} \} \}, \\
    & \{ \{ \emptyset \}, \{ \{ \emptyset \} \} \}, \\
    & \{ \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \} \}, \\
    & \{ \{ \{ \emptyset \} \}, \{ \emptyset, \{ \emptyset \} \} \}, \\
    & \{ \emptyset, \{ \emptyset \}, \{ \{ \emptyset \} \} \}, \\
    & \{ \emptyset, \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \} \}, \\
    & \{ \emptyset, \{ \{ \emptyset \} \}, \{ \emptyset, \{ \emptyset \} \} \}, \\
    & \{ \{ \emptyset \}, \{ \{ \emptyset \} \}, \{ \emptyset, \{ \emptyset \} \} \}, \\
    & \{ \emptyset, \{ \emptyset \}, \{ \{ \emptyset \} \},
    \{ \emptyset, \{ \emptyset \} \} \} \\
    \}
    \end{align*}

    \chapter{Chapter 2 --- Axioms and Operations}

    \section{Arbitrary Unions and Intersections}

    \paragraph{Exercise 1}
    $A \cap B \cap C$ is the set of all integers that are divisible by 4, 9 and 10,
    which is the same as the set of all integers that are divisible by 180.

    \paragraph{Exercise 2}
    Take $A = \emptyset$ and $B = \{ \emptyset \}$. Then $\bigcup A = \bigcup B = \emptyset$
    but $A \neq B$. (There are many other possible answers.)

    \paragraph{Exercise 3}
    Let $b \in A$. We must show that $b \subseteq \bigcup A$.

    Let $x$ be any element of $b$. We must show that $x \in \bigcup A$. We know that $x \in b$ and $b \in A$,
    and so $x \in \bigcup A$ by the definition of $\bigcup A$.

    \paragraph{Exercise 4}
    Suppose $A \subseteq B$. Let $x \in \bigcup A$. We must show that $x \in \bigcup B$.

    Pick an element $a \in A$ such that $x \in a$. Then $a \in B$ because $A \subseteq B$. Since we know
    $x \in a$ and $a \in B$, we know that $x \in \bigcup B$.

    \paragraph{Exercise 5}
    Assume that every member of $\mathcal{A}$ is a subset of $B$. Let $x \in \bigcup \mathcal{A}$.
    We must show that $x \in B$.

    Pick $A \in \mathcal{A}$ such that $x \in A$. By our assumption, we have $A \subseteq B$. Since $x \in A$
    and $A \subseteq B$, we have $x \in B$ as required.

    \paragraph{Exercise 6}
    \subparagraph{(a)}We will show that $\bigcup \mathcal{P} A \subseteq A$ and $A \subseteq \bigcup \mathcal{P} A$.

    To show $\bigcup \mathcal{P} A \subseteq A$: This follows from Exercise 5, since every member of $\mathcal{P} A$
    is a subset of $A$.

    To show $A \subseteq \bigcup \mathcal{P} A$: Let $a \in A$. Then we have $a \in \{a\}$ and 
    $\{a\} \in \mathcal{P} A$ so $a \in \bigcup \mathcal{P} A$.

    \subparagraph{(b)}
    To show $A \subseteq \mathcal{P} \bigcup A$: This holds because every element of $A$ is a subset of
    $\bigcup A$, as we proved is Exercise 3.

    Equality holds if and only if $A = \mathcal{P} X$ for some set $X$.

    Proof: If $A = \mathcal{P} \bigcup A$ then of course $A = \mathcal{P} X$ for some $X$.

    Conversely, if $A = \mathcal{P} X$, then we have
    \begin{align*}
        \mathcal{P} \bigcup A & = \mathcal{P} \bigcup \mathcal{P} X \\
        & = \mathcal{P} X & (\text{by part (a)}) \\
        & = A
    \end{align*}

    \paragraph{Exercise 7}

    \subparagraph{(a)}
    For any set $X$,
    \begin{align*}
        & X \in \mathcal{P} A \cap \mathcal{P} B \\
        \Leftrightarrow & X \subseteq A \text{ and } X \subseteq B \\
        \Leftrightarrow & \text{Every member of $X$ is a member of $A$ and a member of $B$}  \\
        \Leftrightarrow & X \subseteq A \cap B \\
        \Leftrightarrow & X \in \mathcal{P} (A \cap B)
    \end{align*}

    \subparagraph{(b)}
    Let $X \in \mathcal{P} A \cup \mathcal{P} B$. Then either $X \in \mathcal{P} A$ or $X \in \mathcal{P} B$
    (or both). If $X \in \mathcal{P} A$, then we have $X \subseteq A$ and so $X \subseteq A \cup B$ (because
    $A \subseteq A \cup B$). Similarly if $X \in \mathcal{P} B$ then we have $X \subseteq A \cup B$. So in
    either case $X \subseteq A \cup B$, hence $X \in \mathcal{P} (A \cup B)$.

    Equality holds if and only if either $A \subseteq B$ or $B \subseteq A$.

    Proof: Suppose $A \subseteq B$. Then $\mathcal{P} A \subseteq \mathcal{P} B$ (Chapter 1 Exercise 3)
    and so $\mathcal{P} A \cup \mathcal{P} B = \mathcal{P} B$. Also $A \cup B = B$ so $\mathcal{P} (A \cup B)
    = \mathcal{P} B$. Thus $\mathcal{P} A \cup \mathcal{P} B$ and $\mathcal{P} (A \cup B)$ are equal.

    Similarly if $B \subseteq A$ then $\mathcal{P} A \cup \mathcal{P} B = \mathcal{P} (A \cup B)$.

    Conversely, suppose $\mathcal{P} A \cup \mathcal{P} B = \mathcal{P} (A \cup B)$. We have $A \cup B
    \in \mathcal{P} (A \cup B)$, so $A \cup B \in \mathcal{P} A \cup \mathcal{P} B$. If $A \cup B \in \mathcal{P}
    A$, then we have $B \subseteq A \cup B \subseteq A$. And if $A \cup B \in \mathcal{P} B$, then we have
    $A \subseteq A \cup B \subseteq B$.

    \paragraph{Exercise 8}
    If $A$ is a set such that every singleton belongs to $A$, then every set belongs to $\bigcup A$,
    contradicting Theorem 2A.

    \paragraph{Exercise 9}
    Let $a = \{ \emptyset \}$ and $B = \{ \{ \emptyset \} \}$. Then $a \in B$ but $\mathcal{P} a$
    is not a subset of $B$ because $\emptyset \in \mathcal{P} a$ and $\emptyset \notin B$.

    \paragraph{Exercise 10}
    We must show that $\mathcal{P} a \subseteq \mathcal{P} \bigcup B$. So let $X \in \mathcal{P} a$.
    Then $X \subseteq a$; we must show that $X \subseteq \bigcup B$.

    Let $x \in X$; we must show  that $x \in \bigcup B$. We have $x \in a$ (because $x \in X$ and $X \subseteq a$)
    and $a \in B$, hence $x \in \bigcup B$ as required.

    \section{Algebra of Sets}

    \paragraph{Exercise 11}

    For any $x$ we have
    \begin{align*}
        x \in (A \cap B) \cup (A - B) & \Leftrightarrow (x \in A \& x \in B) \text{ or } (x \in A \&
        x \notin B) \\
        & \Leftrightarrow x \in A \& (x \in B \text{ or } x \notin B) \\
        & \Leftrightarrow x \in A
    \end{align*}
    Hence $A = (A \cap B) \cup (A - B)$.

    For any $x$ we have
    \begin{align*}
        x \in A \cup (B - A) & \Leftrightarrow x \in A \text{ or } (x \in B \& x \notin A) \\
        & \Leftrightarrow x \in A \text{ or } x \in B \\
        & \Leftrightarrow x \in A \cup B
    \end{align*}
    Hence $A \cup (B - A) = A \cup B$.

    \paragraph{Exercise 12}
    For any $x$,
    \begin{align*}
        x \in C - (A \cap B) & \Leftrightarrow x \in C \& \neg (x \in A \& x \in B) \\
        & \Leftrightarrow x \in C \& (x \notin A \text{ or } x \notin B) \\
        & \Leftrightarrow (x \in C \& x \notin A) \text{ or } (x \in C \& x \notin B) \\
        & \Leftrightarrow x \in (C - A) \cup (C - B)
    \end{align*}

    \paragraph{Exercise 13}
    Suppose $A \subseteq B$. Let $x \in C - B$; we must show $x \in C - A$. We have $x \in C$ and $x \notin B$. Therefore $x \notin A$,
    since every member of $A$ is a member of $B$. And so we have $x \in C - A$ as required.

    \paragraph{Exercise 14}
    Let $A = \{ \emptyset \}$, $B = \emptyset$ and $C = \{ \emptyset \}$. Then $A - (B - C) = A - \emptyset
    = \{ \emptyset \}$ while $(A - B) - C = \{ \emptyset \} - C = \emptyset$.

    \paragraph{Exercise 15}
    \subparagraph{(a)}
    For any $x$ we have the following eight possibilities:

    \begin{tabular}{|c|c|c|c|c|}
        \hline
        $x \in A$ & $x \in B$ & $x \in C$ & $x \notin A \cap (B + C)$ & $x \notin (A \cap B) + (A \cap C) $ \\
        $x \in A$ & $x \in B$ & $x \notin C$ & $x \in A \cap (B + C)$ & $x \in (A \cap B) + (A \cap C) $ \\
        $x \in A$ & $x \notin B$ & $x \in C$ & $x \in A \cap (B + C)$ & $x \in (A \cap B) + (A \cap C) $ \\
        $x \in A$ & $x \notin B$ & $x \notin C$ & $x \notin A \cap (B + C)$ & $x \notin (A \cap B) + (A \cap C) $ \\
        $x \notin A$ & $x \in B$ & $x \in C$ & $x \notin A \cap (B + C)$ & $x \notin (A \cap B) + (A \cap C) $ \\
        $x \notin A$ & $x \in B$ & $x \notin C$ & $x \notin A \cap (B + C)$ & $x \notin (A \cap B) + (A \cap C) $ \\
        $x \notin A$ & $x \notin B$ & $x \in C$ & $x \notin A \cap (B + C)$ & $x \notin (A \cap B) + (A \cap C) $ \\
        $x \notin A$ & $x \notin B$ & $x \notin C$ & $x \notin A \cap (B + C)$ & $x \notin (A \cap B) + (A \cap C) $ \\
        \hline
    \end{tabular}

    In every case, we have $x \in A \cap (B + C) \Leftrightarrow x \in (A \cap B) + (A \cap C)$.

    \subparagraph{(b)}
    For any $x$ we have the following eight possibilities:

    \begin{tabular}{|c|c|c|c|c|}
        \hline
        $x \in A$ & $x \in B$ & $x \in C$ & $x \in A + (B + C)$ & $x \in (A + B) + C $ \\
        $x \in A$ & $x \in B$ & $x \notin C$ & $x \notin A + (B + C)$ & $x \notin (A + B) + C $ \\
        $x \in A$ & $x \notin B$ & $x \in C$ & $x \notin A + (B + C)$ & $x \notin (A + B) + C $ \\
        $x \in A$ & $x \notin B$ & $x \notin C$ & $x \in A + (B + C)$ & $x \in (A + B) + C $ \\
        $x \notin A$ & $x \in B$ & $x \in C$ & $x \notin A + (B + C)$ & $x \notin (A + B) + C $ \\
        $x \notin A$ & $x \in B$ & $x \notin C$ & $x \in A + (B + C)$ & $x \in (A + B) + C $ \\
        $x \notin A$ & $x \notin B$ & $x \in C$ & $x \in A + (B + C)$ & $x \in (A + B) + C $ \\
        $x \notin A$ & $x \notin B$ & $x \notin C$ & $x \notin A + (B + C)$ & $x \notin (A + B) + C $ \\
        \hline
    \end{tabular}

    In every case, we have $x \in A + (B + C) \Leftrightarrow x \in (A + B) + C$.

    \paragraph{Exercise 16}

    \begin{align*}
        [(A \cup B \cup C) \cap (A \cup B)] - [(A \cup (B - C)) \cap A]
        & = (A \cup B) - A \\
        & = B - A
    \end{align*}

    \paragraph{Exercise 17}
    \subparagraph{(a) $\Leftrightarrow$ (b)}
    \begin{align*}
        A \subseteq B & \Leftrightarrow \text{Every element of $A$ is an element of $B$} \\
        & \Leftrightarrow \text{There is no element of $A$ that is not an element of $B$} \\
        & \Leftrightarrow A - B = \emptyset
    \end{align*}

    \subparagraph{(a) $\Rightarrow$ (c)}
    Suppose $A \subseteq B$. We have $B \subseteq A \cup B$ from the definition of $A \cup B$;
    we must prove that $A \cup B \subseteq B$. So let $x \in A \cup B$. Then $x \in A$ or $x \in B$.
    But in either case $x \in B$, since $x \in A \Rightarrow x \in B$. Thus we have $x \in B$ as required.

    \subparagraph{(c) $\Rightarrow$ (a)}
    We always have $A \subseteq A \cup B$. So if $A \cup B = B$ then we have $A \subseteq B$.

    \subparagraph{(a) $\Rightarrow$ (d)}
    Suppose $A \subseteq B$. We have $A \cap B \subseteq A$ from the definition of $A \cap B$;
    we must prove that $A \subseteq A \cap B$. So let $x \in A$. Then $x \in B$ since $A \subseteq B$,
    hence $x \in A \cap B$ as required.

    \subparagraph{(d) $\Rightarrow$ (a)}
    We always have $A \cap B \subseteq B$. So if $A \cap B = A$ then $A \subseteq B$.

    \paragraph{Exercise 18}
    We can make the following 16 sets:
    \begin{itemize}
        \item $\emptyset$ ($= A - A$)
        \item $A - B$
        \item $A \cap B$
        \item $B - A$
        \item $S - (A \cup B)$
        \item $A$
        \item $A + B$
        \item $S - B$
        \item $B$
        \item $S - (A + B)$
        \item $S - A$
        \item $A \cup B$
        \item $S - (B - A)$
        \item $S - (A \cap B)$
        \item $S - (A - B)$
    \end{itemize}

    \paragraph{Exercise 19}
    They are never equal, because for all $A$, $B$, we have $\emptyset \in \mathcal{P}(A - B)$ but
    $\emptyset \notin \mathcal{P} A - \mathcal{P} B$ since $\emptyset \in \mathcal{P} B$.

    \paragraph{Exercise 20}
    Assume $A \cup B = A \cup C$ and $A \cap B = A \cap C$.

    We first show $B \subseteq C$. Let $x \in B$; we show $x \in C$. We have $x \in A \cup B = A \cup C$, so either $x \in A$
    or $x \in C$. If $x \in C$, we are done. If $x \in A$, then we have $x \in A \cap B = A \cap C$,
    and so $x \in C$ in this case too.

    We can show $C \subseteq B$ similarly. Hence $B = C$.

    \paragraph{Exercise 21}
    For any $x$, we have
    \begin{align*}
        x \in \bigcup (A \cup B) & \Leftrightarrow \text{there exists $C$ such that $C \in A \cup B$
        and $x \in C$} \\
        & \Leftrightarrow \text{there exists $C \in A$ such that $x \in C$, or there exists $C \in B$
        such that $x \in C$} \\
        & \Leftrightarrow x\in \bigcup A \cup \bigcup B
    \end{align*}

    \paragraph{Exercise 22}
    For any $x$, we have
    \begin{align*}
        x \in \bigcap (A \cup B) & \Leftrightarrow \text{for all $C$, if $C \in A$ or $C \in B$
        then $x \in C$} \\
        & \Leftrightarrow \text{for all $C \in A$ we have $x \in C$, and for all $C \in B$
        we have $x \in C$} \\
        & \Leftrightarrow x\in \bigcap A \cap \bigcap B
    \end{align*}

    \paragraph{Exercise 23}
    \begin{proof}
        \pf
        \step{1}{$A \subseteq \bigcap \{ A \cup X \mid X \in \mathcal{B} \}$}
        \begin{proof}
            \step{a}{\pflet{$x \in A$}}
            \step{b}{\pflet{$X \in \mathcal{B}$}}
            \step{c}{$x \in A \cup X$}
        \end{proof}
        \step{2}{$\bigcap \mathcal{B} \subseteq \bigcap \{ A \cup X \mid X \in \mathcal{B} \}$}
        \begin{proof}
            \step{a}{\pflet{$x \in \bigcap \mathcal{B}$}}
            \step{b}{\pflet{$X \in \mathcal{B}$}}
            \step{c}{$x \in X$}
            \step{d}{$x \in A \cup X$}
        \end{proof}
        \step{3}{$\bigcap \{ A \cup X \mid X \in \mathcal{B} \} \subseteq A \cup \bigcap \mathcal{B}$}
        \begin{proof}
            \step{a}{\pflet{$x \in \bigcap \{ A \cup X \mid X \in \mathcal{B} \}$}}
            \step{b}{\assume{$x \notin A$} \prove{$x \in \bigcap \mathcal{B}$}}
            \step{c}{\pflet{$X \in \mathcal{B}$}}
            \step{d}{$x \in A \cup X$}
            \step{e}{$x \in X$}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 24}
    \subparagraph{(a)}
    \begin{align*}
        Y \in \mathcal{P} \bigcap \mathcal{A}
        & \Leftrightarrow Y \subseteq \bigcap \mathcal{A} \\
        & \Leftrightarrow \forall y \in Y. \forall X \in \mathcal{A}. y \in X \\
        & \Leftrightarrow \forall X \in \mathcal{A}. \forall y \in Y. y \in X \\
        & \Leftrightarrow \forall X \in \mathcal{A}. Y \in \mathcal{P} X \\
        & \Leftrightarrow Y \in \bigcap \{ \mathcal{P} X \mid X \in \mathcal{A} \}
    \end{align*}

    \subparagraph{(b)}
    $\bigcup \{ \mathcal{P} X \mid X \in \mathcal{A} \} \subseteq \mathcal{P} \bigcup \mathcal{A}$

    \begin{proof}
        \pf
        \step{1}{\pflet{$Y \in \bigcup \{ \mathcal{P} X \mid X \in \mathcal{A} \}$}}
        \step{2}{\pick\ $X \in \mathcal{A}$ such that $Y \in \mathcal{P} X$}
        \step{3}{$Y \subseteq X$}
        \step{4}{$Y \subseteq \bigcup \mathcal{A}$}
        \step{5}{$Y \in \mathcal{P} \bigcup \mathcal{A}$}
    \end{proof}

    Equality holds if and only if $\bigcup \mathcal{A} \in \mathcal{A}$.
    \begin{proof}
        \step{1}{If $\bigcup \{ \mathcal{P} X \mid X \in \mathcal{A} \} = \mathcal{P} \bigcup \mathcal{A}$
        then $\bigcup \mathcal{A} \in \mathcal{A}$}
        \begin{proof}
            \step{a}{\assume{$\bigcup \{ \mathcal{P} X \mid X \in \mathcal{A} \} = \mathcal{P} \bigcup \mathcal{A}$}}
            \step{b}{$\bigcup \mathcal{A} \in \bigcup \{ \mathcal{P} X \mid X \in \mathcal{A} \}$}
            \step{c}{\pick\ $X \in \mathcal{A}$ such that $\bigcup \mathcal{A} \in \mathcal{P} X$}
            \step{d}{$X = \bigcup \mathcal{A}$}
        \end{proof}
        \step{2}{If $\bigcup \mathcal{A} \in \mathcal{A}$ then
        $\bigcup \{ \mathcal{P} X \mid X \in \mathcal{A} \} = \mathcal{P} \bigcup \mathcal{A}$}
        \begin{proof}
            \pf\ If $\bigcup \mathcal{A} \in \mathcal{A}$ then $\mathcal{P} \bigcup \mathcal{A}
            \in \{ \mathcal{P} X \mid X \in \mathcal{A} \}$.
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 25}
    We have $A \cup \bigcup \mathcal{B} = \bigcup \{ A \cup X \mid X \in \mathcal{B} \}$ if and only if
    $A = \emptyset$ or $\mathcal{B} \neq \emptyset$

    \begin{proof}
        \step{1}{If $A \cup \bigcup \mathcal{B}  = \bigcup \{ A \cup X \mid X \in \mathcal{B} \}$
        then $A = \emptyset$ or $\mathcal{B} \neq \emptyset$}
        \begin{proof}
            \pf\ If $A \cup \bigcup \mathcal{B}  = \bigcup \{ A \cup X \mid X \in \mathcal{B} \}$
            and $\mathcal{B} = \emptyset$ then
            \begin{align*}
                A \cup \bigcup \emptyset & = \bigcup \emptyset \\
                \therefore A & = \emptyset
            \end{align*}
        \end{proof}
        \step{2}{If $A = \emptyset$ then $A \cup \bigcup \mathcal{B}  = \bigcup \{ A \cup X \mid X \in \mathcal{B} \}$}
        \begin{proof}
            \pf\ Both sides are equal to $\bigcup \mathcal{B}$
        \end{proof}
        \step{3}{If $\mathcal{B} \neq \emptyset$ then $A \cup \bigcup \mathcal{B}  = \bigcup \{ A \cup X \mid X \in \mathcal{B} \}$}
        \begin{proof}
            \step{a}{\assume{$\mathcal{B} \neq \emptyset$}}
            \step{b}{$A \cup \bigcup \mathcal{B} \subseteq \bigcup \{ A \cup X \mid X \in \mathcal{B} \}$}
            \begin{proof}
                \step{i}{\pflet{$x \in A \cup \bigcup \mathcal{B}$}
                \prove{$x \in \bigcup \{ A \cup X \mid X \in \mathcal{B} \}$}}
                \step{ii}{\case{$x \in A$}}
                \begin{proof}
                    \step{one}{\pick\ $X \in \mathcal{B}$}
                    \begin{proof}
                        \pf\ By \stepref{a}
                    \end{proof}
                    \step{two}{$x \in A \cup X$}
                \end{proof}
                \step{iii}{\case{$x \in \bigcup \mathcal{B}$}}
                \begin{proof}
                    \step{one}{\pick\ $X \in \mathcal{B}$ such that $x \in X$}
                    \step{two}{$x \in A \cup X$}
                \end{proof}
            \end{proof}
            \step{c}{$\bigcup \{ A \cup X \mid X \in \mathcal{B} \} \subseteq A \cup \bigcup \mathcal{B}$}
            \begin{proof}
                \step{i}{\pflet{$x \in \bigcup \{ A \cup X \mid X \in \mathcal{B} \}$}}
                \step{ii}{\pick\ $X \in \mathcal{B}$ such that $x \in A \cup X$}
                \step{iii}{$X \subseteq \bigcup \mathcal{B}$}
                \step{iv}{$A \cup X \subseteq A \cup \bigcup \mathcal{B}$}
                \step{v}{$x \in A \cup \bigcup \mathcal{B}$}
            \end{proof}
        \end{proof}
    \end{proof}

    \section{Review Exercises}

    \paragraph{Exercise 26}
    Sets $A$, $B$, $D$ and $F$ are all equal to each other. Sets $C$, $E$ and $G$ are equal to each other.
    None of the first list is equal to any of the second list.

    \paragraph{Exercise 27}
    Take $A = \{ \{ 0 \}, \{ 1 \} \}$ and $B = \{ \{ 1 \} \}$.
    Then $A \cap B = \{ \{ 1 \} \}$
    and
    \begin{align*}
        \bigcap A \cap \bigcap B & = \emptyset \cap \{1\} \\
        & = \emptyset \\
        \bigcap (A \cap B) & = \bigcap \{ \{ 1 \} \} \\
        & = \{ 1 \}
    \end{align*}

    \paragraph{Exercise 28}
    \begin{align*}
        \bigcup \{ \{ 3,4 \}, \{ \{3\}, \{4\} \}, \{3, \{4\} \}, \{ \{3\}, 4\} \}
        & = \{ 3, 4, \{3\}, \{4\} \}
    \end{align*}

    \paragraph{Exercise 29}
    \subparagraph{(a)}
    $\emptyset$
    \subparagraph{(b)}
    We have 
    \begin{align*}
        \{ \emptyset \} & \subseteq \mathcal{P} \{ \emptyset \} \\
        \therefore \mathcal{P} \{\emptyset\} & \subseteq \mathcal{PP} \{ \emptyset \} \\
        \{ \emptyset \} & \subseteq \mathcal{PP} \{ \emptyset \} \\
        \therefore \mathcal{P} \{\emptyset\} & \subseteq \mathcal{PPP} \{ \emptyset \} \\
        \therefore \bigcap \{ \mathcal{PPP} \{ \emptyset \}, \mathcal{PP} \{ \emptyset \}, \mathcal{P} \{ \emptyset \} \}
        & = \mathcal{PPP} \{ \emptyset \} \cap \mathcal{PP} \{ \emptyset \} \cap \mathcal{P} \{ \emptyset \} \\
        & = \mathcal{P} \{ \emptyset \} \\
        & = \{ \emptyset, \{ \emptyset \} \}
    \end{align*}

    \paragraph{Exercise 30}
    \subparagraph{(a)}
    $\{ \emptyset, \{ \{ \emptyset \} \}, \{ \{ \{ \emptyset \} \} \}, \{ \{ \emptyset \}, \{ \{ \emptyset \} \} \} \}$
    \subparagraph{(b)}
    $\{ \emptyset, \{ \emptyset \} \}$
    \subparagraph{(c)}
    $\{ \emptyset, \{ \emptyset \}, \{ \{ \emptyset \} \}, \{ \emptyset, \{ \emptyset \} \} \}$
    \subparagraph{(d)}
    $\{ \{ \emptyset \}, \{ \{ \emptyset \} \} \}$

    \paragraph{Exercise 31}
    \subparagraph{(a)}
    $\{ 1, 2, 3, \emptyset \}$
    \subparagraph{(b)}
    $\emptyset$
    \subparagraph{(c)}
    $\emptyset$
    \subparagraph{(d)}
    $\emptyset$

    \paragraph{Exercise 32}
    \subparagraph{(a)}
    $a \cup b$
    \subparagraph{(b)}
    $a$
    \subparagraph{(c)}
    \begin{align*}
        \bigcap \bigcup S \cup (\bigcup \bigcup S - \bigcup \bigcap S)
        & = (a \cap b) \cup ((a \cup b) - a) \\
        & = (a \cap b) \cup (b - a) \\
        & = b
    \end{align*}

    \paragraph{Exercise 33}
    When $a \neq b$:
    \begin{align*}
        \bigcup (\bigcup S - \bigcap S) & = \bigcup (\{ a,b \} - \{a\}) \\
        & = \bigcup \{b\} \\
        & = b
    \end{align*}
    When $a = b$:
    \begin{align*}
        \bigcup (\bigcup S - \bigcap S) & = \bigcup (\{ a,b \} - \{a\}) \\
        & = \bigcup \emptyset \\
        & = \emptyset
    \end{align*}

    \paragraph{Exercise 34}
    For any set $S$, we have
    \begin{align*}
        \emptyset & \subseteq \mathcal{P} S \\
        \therefore \emptyset & \in \mathcal{PP} S \\
        \emptyset & \subseteq S \\
        \therefore \emptyset & \in \mathcal{P} S \\
        \therefore \{ \emptyset \} & \subseteq \mathcal{P} S \\
        \therefore \{ \emptyset \} & \in \mathcal{PP} S \\
        \therefore \{ \emptyset, \{ \emptyset \} \} & \subseteq \mathcal{PP} S \\
        \therefore \{ \emptyset, \{ \emptyset \} \} & \in \mathcal{PPP} S
    \end{align*}

    \paragraph{Exercise 35}
    Assume $\mathcal{P}A = \mathcal{P} B$. Then we have
    \begin{align*}
        A & \in \mathcal{P} A \\
        \therefore A & \in \mathcal{P} B \\
        \therefore A & \subseteq B \\
        B & \in \mathcal{P} B \\
        \therefore B & \in \mathcal{P} A \\
        \therefore B & \subseteq A \\
        \therefore A & = B
    \end{align*}

    \paragraph{Exercise 36}
    \subparagraph{(a)}
    \begin{align*}
        x \in A - (A \cap B) & \Leftrightarrow x \in A \ \& \neg (x \in A \ \& \ x \in B) \\
        & \Leftrightarrow x \in A\ \& \ x \notin B \\
        & \Leftrightarrow x \in A - B
    \end{align*}
    
    \subparagraph{(b)}
    \begin{align*}
        x \in A - (A - B) & \Leftrightarrow x \in A \ \& \neg (x \in A \ \&\ x \notin B) \\
        & \Leftrightarrow x \in A \ \& \ x \in B \\
        & \Leftrightarrow x \in A \cap B
    \end{align*}

    \paragraph{Exercise 37}
    \subparagraph{(a)}
    \begin{align*}
        x \in (A \cup B) - C & \Leftrightarrow (x \in A \text{ or } x \in B) \ \&\ x \notin C \\
        & \Leftrightarrow (x \in A \ \&\ x \notin C) \text{ or } (x \in B \ \&\ x \notin C) \\
        & \Leftrightarrow x \in (A - C) \cup (B - C)
    \end{align*}

    \subparagraph{(b)}
    \begin{align*}
        x \in A - (B - C) & \Leftrightarrow x \in A \ \& \neg (x \in B \ \&\ x \notin C) \\
        & \Leftrightarrow x \in A \ \& (x \notin B \text{ or } x \in C) \\
        & \Leftrightarrow (x \in A \ \&\ x \notin B) \text{ or } (x \in A \ \&\ x \in C) \\
        & \Leftrightarrow x \in (A - B) \cup (A \cap C)
    \end{align*}

    \subparagraph{(c)}
    \begin{align*}
        x \in (A - B) - C & \Leftrightarrow x \in A \ \&\ x \notin B \ \&\ x \notin C \\
        & \Leftrightarrow x \in A \ \& \neg (x \in B \vee x \in C) \\
        & \Leftrightarrow x \in A - (B \cup C)
    \end{align*}
    
    \paragraph{Exercise 38}
    \subparagraph{(a)}
    If every element of $A$ is an element of $C$, and every element of $B$ is an element of $C$,
    then everything that is an element of either $A$ or $B$ is an element of $C$.

    \subparagraph{(b)}
    If every element of $C$ is an element of $A$, and every element of $C$ is an element of $B$,
    then every element of $C$ is an element of both $A$ and $B$.

    \chapter{Chapter 3 --- Relations and Functions}

    \section{Ordered Pairs}

    \paragraph{Exercise 1}
    We have $\langle 0, 1, 0 \rangle^* = \langle 0, 1, 1 \rangle^* = \{ \{ 0 \}, \{ 0,1 \} \}$.

    \paragraph{Exercise 2}
    \subparagraph{(a)}
    \begin{align*}
        & z \in A \times (B \cup C) \\
        \Leftrightarrow & \exists x,y (z = (x,y) \ \&\ x \in A \ \&\ (y \in B \text{ or } y \in C)) \\
        \Leftrightarrow & \exists x,y (z = (x,y)\ \&\ x \in A\ \&\ y \in B) \text{ or }
        (z = (x,y)\ \&\ x \in A\ \&\ y \in C) \\
        \Leftrightarrow & z \in (A \times B) \cup (A \times C)
    \end{align*}
    \subparagraph{(b)}
    \begin{proof}
        \step{1}{\assume{$A \times B = A \times C$ and $A \neq \emptyset$}}
        \step{2}{\pick\ $a \in A$}
        \step{3}{For all $x$, $x \in B \Leftrightarrow x \in C$}
        \begin{proof}
            \pf\ $x \in B$ iff $(a,x) \in A \times B$ iff $(a,x) \in A \times C$ iff $x \in C$.
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 3}
    \begin{align*}
        & z \in A \times \bigcup \mathcal{B} \\
        \Leftrightarrow & \exists x,y (z = (x,y)\ \&\ x \in A\ \&\ \exists X \in \mathcal{B}. y \in X) \\
        \Leftrightarrow & \exists X \in \mathcal{B}. \exists x,y (z = (x,y)\ \&\ x \in A\ \&\ y \in X) \\
        \Leftrightarrow & z \in \bigcup \{ A \times X : X \in \mathcal{B} \}
    \end{align*}

    \paragraph{Exercise 4}
    If every ordered pair belongs to $A$ then every set belongs to $\bigcup \bigcup A$ contradicting
    Theorem 2A.

    \paragraph{Exercise 5}
    \subparagraph{(a)}
    Apply a Subset Axiom to $\mathcal{P}(A \times B)$: we have 
    $C = \{ z \in \mathcal{P}(A \times B) \mid \exists x \in A. z = \{x\} \times B \}$.
    \subparagraph{(b)}
    \begin{align*}
        & z \in \bigcup C \\
        \Leftrightarrow & \exists x \in A. z \in \{x\} \times B \\
        \Leftrightarrow & \exists x \in A. \exists y \in B. z = (x,y) \\
        \Leftrightarrow & z \in A \times B
    \end{align*}

    \section{Relations}

    \paragraph{Exercise 6}
    If $A \subseteq \dom A \times \ran A$ then $A$ is a set of ordered pairs, i.e. a relation.

    Conversely, suppose $A$ is a relation. Let $z \in A$. Then $z$ is an ordered pair; let $z = (x,y)$.
    We have $x \in \dom A$ and $y \in \ran A$ and so $z \in \dom A \times \ran A$ as required.

    \paragraph{Exercise 7}
    We have $\fld R \subseteq \bigcup \bigcup R$ by Lemma 3D.

    Conversely, let $x \in \bigcup \bigcup R$. Pick $a$ and $b$ such that $x \in a$, $a \in b$ and $b \in R$.
    Then $b$ is an ordered pair; let $b = (y,z)$. We have $a = \{y\}$ or $\{y,z\}$, hence $x = y$ or
    $x = z$. In either case, $x \in \fld R$.

    \paragraph{Exercise 8}
    \subparagraph{(a)}
    \begin{align*}
        & x \in \dom \bigcup \mathcal{A} \\
        \Leftrightarrow & \exists y. \exists R \in \mathcal{A}. (x,y) \in R \\
        \Leftrightarrow & \exists R \in \mathcal{A}. \exists y. (x,y) \in R \\
        \Leftrightarrow & x \in \bigcup \{ \dom R : R \in \mathcal{A} \}
    \end{align*}

    \subparagraph{(b)}
    \begin{align*}
        & y \in \ran \bigcup \mathcal{A} \\
        \Leftrightarrow & \exists x. \exists R \in \mathcal{A}. (x,y) \in R \\
        \Leftrightarrow & \exists R \in \mathcal{A}. \exists x. (x,y) \in R \\
        \Leftrightarrow & y \in \bigcup \{ \ran R : R \in \mathcal{A} \}
    \end{align*}

    \paragraph{Exercise 9}
    Assume $\mathcal{A}$ is nonempty.
    We have $\dom \bigcap \mathcal{A} \subseteq \bigcap \{ \dom R : R \in \mathcal{A} \}$.

    \begin{proof}
        \pf
            \begin{align*}
                & x \in \dom \bigcap \mathcal{A} \\
                \Leftrightarrow & \exists y. \forall R \in \mathcal{A}. (x,y) \in R \\
                \Rightarrow & \forall R \in \mathcal{A}. \exists y. (x,y) \in R \\
                \Leftrightarrow & x \in \bigcap \{ \dom R : R \in \mathcal{A} \}
            \end{align*}                    
    \end{proof}

    Equality holds iff the middle '$\Rightarrow$' can be reversed, i.e. iff for all $x$,
    if $\forall R \in \mathcal{A}. \exists y. (x,y) \in R$ then $\exists y. \forall R \in \mathcal{A}. (x,y) \in R$.
    I haven't found a simpler condition than this. The condition does not always hold, for example
    if $\mathcal{A} = \{ \{ (1,2) \}, \{ (1,3) \} \}$ then $\dom \bigcap \mathcal{A} = \emptyset$
    while $\bigcap \{ \dom R : R \in \mathcal{A} \} = \{1\}$.

    Similarly, $\ran \bigcap \mathcal{A} \subseteq \bigcap \{ \ran R : R \in \mathcal{A} \}$, and
    equality holds iff, for any $y$, if $\forall R \in \mathcal{A}. \exists x. (x,y) \in R$ then $\exists x. \forall R \in \mathcal{A}. (x,y) \in R$.

    \section{$n$-ary Relations}

    \paragraph{Exercise 10}
    This follows from the equations at the top of page 42. An ordered $4$-tuple $\langle a,b,c,d \rangle$
    is also an ordered 1-tuple (because every set is), and the ordered pair $\langle \langle a,b,c \rangle, d
    \rangle$, and the ordered triple $\langle \langle a,b \rangle, c, d \rangle$.

    \section{Functions}

    \paragraph{Exercise 11}
    We prove $F \subseteq G$. Let $z \in F$. Since $F$ is a relation, then $z$ is an ordered pair;
    let $z = \langle x, y \rangle$. We have $x \in \dom F$ and $y = F(x)$. Therefore $x \in \dom G$
    and $y = G(x)$ (because $\dom F = \dom G$ and $F(x) = G(x)$). Hence $\langle x,y \rangle \in G$,
    i.e. $z \in G$.

    We have proved $F \subseteq G$. We can prove $G \subseteq F$ similarly. Thus $F = G$.

    \paragraph{Exercise 12}
    \begin{proof}
        \pf
        \step{1}{If $f \subseteq g$ then $\dom f \subseteq \dom g$ and $\forall x \in \dom f. f(x) = g(x)$}
        \begin{proof}
            \step{a}{\assume{$f \subseteq g$}}
            \step{b}{\pflet{$x \in \dom f$}}
            \step{c}{$(x, f(x)) \in f$}
            \step{d}{$(x, f(x)) \in g$}
            \step{e}{$x \in \dom g$ and $g(x) = f(x)$}
        \end{proof}
        \step{3}{If $\dom f = \dom g$ and $\forall x \in \dom f. f(x) = g(x)$ then $f \subseteq g$}
        \begin{proof}
            \step{a}{\assume{$\dom f = \dom g$ and $\forall x \in \dom f. f(x) = g(x)$}}
            \step{b}{\pflet{$z \in f$}}
            \step{c}{\pflet{$z = (x,y)$}}
            \step{d}{$x \in \dom f$ and $y = f(x)$}
            \step{e}{$x \in \dom g$ and $y = g(x)$}
            \step{f}{$z = (x,y) \in g$}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 13}
    \begin{proof}
        \pf
        \step{1}{\assume{$f$ and $g$ are functions}}
        \step{2}{\assume{$f \subseteq g$}}
        \step{3}{\assume{$\dom g \subseteq \dom f$}}
        \step{4}{$\dom f = \dom g$}
        \begin{proof}
            \pf\ We have $\dom f \subseteq \dom g$ from \stepref{2} and $\dom g \subseteq \dom f$
            from \stepref{3}
        \end{proof}
        \step{5}{For $x \in \dom f$ we have $f(x) = g(x)$}
        \begin{proof}
            \pf\ From \stepref{2} and Exercise 12
        \end{proof}
        \qedstep
        \begin{proof}
            \pf\ From Exercise 11.
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 14}
    \subparagraph{(a)}
    If $(x,y)$ and $(x,z)$ are members of $f \cap g$ then they are both members of $f$,
    hence $y = z$.

    \subparagraph{(b)}
    \begin{proof}
        \pf
        \step{1}{If $f \cup g$ is a function then, for all $x \in \dom f \cap \dom g$, we have $f(x) = g(x)$.}
        \begin{proof}
            \step{a}{\assume{$f \cup g$ is a function.}}
            \step{b}{\pflet{$x \in \dom f \cap \dom g$}}
            \step{c}{$(x,f(x))$ and $(x,g(x))$ are both elements of $f \cup g$}
            \step{d}{$f(x) = g(x)$}
        \end{proof}
        \step{2}{If, for all $x \in \dom f \cap \dom g$, we have $f(x) = g(x)$, then $f \cup g$ is a function.}
        \begin{proof}
            \step{a}{\assume{For all $x \in \dom f \cap \dom g$, we have $f(x) = g(x)$}}
            \step{b}{$f \cup g$ is a relation.}
            \begin{proof}
                \pf\ Since every element of either $f$ or $g$ is an ordered pair.
            \end{proof}
            \step{c}{Whenever $(x,y)$ and $(x,z)$ are elements of $f \cup g$ we have $y = z$}
            \begin{proof}
                \step{i}{\pflet{$(x,y),(x,z) \in f \cup g$}}
                \step{ii}{\case{$(x,y),(x,z) \in f$}}
                \begin{proof}
                    \pf\ Then $y = z$ since $f$ is a function.
                \end{proof}
                \step{iii}{\case{$(x,y) \in f$,$(x,z) \in g$}}
                \begin{proof}
                    \pf\ Then $y = z$ by \stepref{a}
                \end{proof}
                \step{iv}{\case{$(x,y) \in g$,$(x,z) \in f$}}
                \begin{proof}
                    \pf\ Then $y = z$ by \stepref{a}
                \end{proof}
                \step{v}{\case{$(x,y),(x,z) \in g$}}
                \begin{proof}
                    \pf\ Then $y = z$ since $g$ is a function.
                \end{proof}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 15}
    \begin{proof}
        \pf
        \step{1}{$\bigcup \mathcal{A}$ is a relation.}
        \begin{proof}
            \pf\ Since every member of $\mathcal{A}$ is a relation.
        \end{proof}
        \step{2}{Whenever $(x,y)$ and $(x,z)$ are elements of $\bigcup \mathcal{A}$ then $y = z$}
        \begin{proof}
            \step{a}{\pflet{$(x,y),(x,z) \in \bigcup \mathcal{A}$}}
            \step{b}{\pick\ $f, g \in \mathcal{A}$ such that $(x,y) \in f$ and $(x,z) \in g$}
            \step{c}{\assume{w.l.o.g. $f \subseteq g$}}
            \step{d}{$(x,y),(x,z) \in g$}
            \step{e}{$y = z$}
            \begin{proof}
                \pf\ Since $g$ is a function.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 16}
    If every function belongs to $A$ then every set belongs to $\dom \bigcup A$ contradiction Theorem 2A.

    \paragraph{Exercise 17}
    \begin{proof}
        \pf
        \step{1}{\pflet{$R$ and $S$ be single-rooted.}}
        \step{2}{\pflet{$(x,z),(y,z) \in R \circ S$}}
        \step{3}{\pick\ $t$ and $t'$ such that $(x,t) \in S$, $(t,z) \in R$, $(y,t') \in S$ and $(t',z) \in R$}
        \step{4}{$t = t'$}
        \begin{proof}
            \pf\ Since $R$ is single-rooted.
        \end{proof}
        \step{5}{$x = y$}
        \begin{proof}
            \pf\ Since $S$ is single-rooted.
        \end{proof}
    \end{proof}

    Thus if $F$ and $G$ are one-to-one functions then $F \circ G$ is single-rooted and a function by Theorem
    3H, hence a one-to-one function.
    
    \paragraph{Exercise 18}
    \begin{align*}
        R \circ R & = \{ \langle 0,2 \rangle, \langle 0,3 \rangle, \langle 1,3 \rangle \} \\
        R \restriction \{ 1 \} & = \{ \langle 1,2 \rangle, \langle 1,3 \rangle \} \\
        R^{-1} \restriction \{ 1 \} & = \{ \langle 1, 0 \rangle \} \\
        R [\![ \{ 1 \} ]\!] & = \{ 2, 3 \} \\
        R^{-1} [\![ \{1\} ]\!] & = \{ 0 \}
    \end{align*}

    \paragraph{Exercise 19}
    \begin{align*}
        A(\emptyset) & = \{ \emptyset, \{ \emptyset \} \} \\
        A [\![ \emptyset ]\!] & = \emptyset \\
        A [\![ \{ \emptyset \} ]\!] & = \{ \{ \emptyset, \{ \emptyset \} \} \} \\
        A [\![ \{ \emptyset, \{ \emptyset \} \} ]\!] & = \{ \{ \emptyset, \{ \emptyset \} \}, \emptyset \} \\
        A^{-1} & = \{ \langle \{ \emptyset, \{ \emptyset \} \}, \emptyset \rangle,
        \langle \emptyset, \{ \emptyset \} \rangle \} \\
        A \circ A & = \{ \langle \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \} \rangle \} \\
        A \restriction \emptyset & = \emptyset \\
        A \restriction \{ \emptyset \} & = \{ \langle \emptyset, \{ \emptyset, \{ \emptyset \} \} \rangle \} \\
        A \restriction \{ \emptyset, \{ \emptyset \} \} & = \{ \langle \emptyset, \{ \emptyset, \{ \emptyset \} \} \rangle,
        \langle \{ \emptyset \}, \emptyset \rangle \} \\
        & = A \\
        \bigcup \bigcup A & = \{ \emptyset , \{ \emptyset, \{ \emptyset \} \},
        \{ \emptyset \} \} 
    \end{align*}

    \paragraph{Exercise 20}
    \begin{align*}
        z \in F \restriction A & \Leftrightarrow z \in F \ \&\ \exists x,y. (z = \langle x,y \rangle \ \&\ x \in A) \\
        & \Leftrightarrow z \in F \ \&\ \exists x,y (z = \langle x,y \rangle \ \&\ x \in A \ \&\ y \in \ran F) \\
        & \Leftrightarrow z \in F \cap (A \times \ran F)
    \end{align*}

    \paragraph{Exercise 21}
    Both are equal to $\{ \langle x,w \rangle \mid \exists y,z. xTy\ \&\ ySz\ \&\ zRw \}$.

    \paragraph{Exercise 22}
    \subparagraph{(a)}
    \begin{proof}
        \pf
        \step{1}{\assume{$A \subseteq B$}}
        \step{2}{\pflet{$y \in F [\![ A ]\!]$}}
        \step{3}{\pick\ $x \in A$ such that $xFy$}
        \step{4}{$x \in B$ and $xFy$}
        \qed
    \end{proof}
    \subparagraph{(b)}
    Both are equal to $\{ z : \exists x,y. x \in A\ \&\ xGy\ \&\ yFz \}$
    \subparagraph{(c)}
    Both are equal to $\{ \langle x,y \rangle : (x \in A \text{ or } x \in B) \ \&\ xQy \}$

    \paragraph{Exercise 23}
    \begin{align*}
        B \circ I_A & = \{ \langle x,z \rangle : \exists y(xI_Ay \ \&\ yBz) \} \\
        & = \{ \langle x,z \rangle : \exists y(x \in A \ \&\ x = y \ \&\ yBz) \} \\
        & = \{ \langle x,z \rangle : x \in A \ \&\ xBz \} \\
        & = B \restriction A \\
        I_A[\![C]\!] & = \{ y : \exists x \in C. xI_Ay \} \\
        & = \{ y : \exists x \in C (x \in A \ \&\ x = y) \} \\
        & = \{ y : y \in C \ \&\ y \in A \} \\
        & = A \cap C
    \end{align*}

    \paragraph{Exercise 24}
    \begin{align*}
        F^{-1}[\![A]\!] & = \{ x : \exists y \in A. yF^{-1}x \} \\
        & = \{ x : \exists y \in A. x F y \} \\
        & = \{ x \in \dom F : F(x) \in A \}
    \end{align*}

    \paragraph{Exercise 25}
    \subparagraph{(a)}
    \begin{proof}
        \pf
        \step{1}{\pflet{$G$ be a one-to-one function.}}
        \step{2}{$G^{-1}$ is a function.}
        \begin{proof}
            \pf\ Theorem 3F.
        \end{proof}
        \step{3}{$G \circ G^{-1}$ is a function.}
        \begin{proof}
            \pf\ Theorem 3H.
        \end{proof}
        \step{4}{$\dom (G \circ G^{-1}) = \ran G$}
        \begin{proof}
            \pf
            \begin{align*}
                \dom (G \circ G^{-1}) & = \{ x \in \dom G^{-1} : G^{-1}(x) \in \dom G \} & (\text{Theorem 3H}) \\
                & = \{ x \in \ran G : G^{-1}(x) \in \dom G \} & (\text{Theorem 3E}) \\
                & = \ran G
            \end{align*}
        \end{proof}
        \step{5}{$\forall x \in \ran G. (G \circ G^{-1})(x) = x$}
        \begin{proof}
            \pf\ Theorem 3G.
        \end{proof}
        \qed
    \end{proof}

    \subparagraph{(b)}
    Let $G$ be a function. Then
    \begin{align*}
        G \circ G^{-1} & = \{ \langle x,z \rangle : \exists y(xG^{-1}y \ \&\ yGz) \} \\
        & = \{ \langle x,z \rangle : \exists y(yGx\ \&\ yGz) \} \\
        & = \{ \langle x,x \rangle : \exists y. yGx \} & (\text{$G$ is a function}) \\
        & = I_{\ran G}
    \end{align*}

    \paragraph{Exercise 26}
    \subparagraph{(a)}
    \begin{align*}
        F [\![ \bigcup \mathcal{A} ] \! ]
        & = \{ y : \exists x. \exists A \in \mathcal{A} (x \in A \ \&\ xFy) \} \\
        & = \{ y : \exists A \in \mathcal{A}. \exists x (x \in A \ \&\ xFy) \} \\
        & = \bigcup \{ F [\![ A ]\!] : A \in \mathcal{A} \}
    \end{align*}

    \subparagraph{(b)}
    \begin{align*}
        F [\![ \bigcup \mathcal{A} ] \! ]
        & = \{ y : \exists x. \forall A \in \mathcal{A} (x \in A \ \&\ xFy) \} \\
        & \subseteq \{ y : \forall A \in \mathcal{A}. \exists x (x \in A \ \&\ xFy) \} \\
        & = \bigcap \{ F [\![ A ]\!] : A \in \mathcal{A} \}
    \end{align*}

    \paragraph{Exercise 27}
    \begin{align*}
        \dom (F \circ G) & = \{ x : \exists y. x(F \circ G) y \} \\
        & = \{ x : \exists y \exists z(xGz \ \&\ zFy) \} \\
        & = \{ x : \exists z(zG^{-1}x\ \&\ z \in \dom F) \} \\
        & = G^{-1}[\![ \dom F ]\!]
    \end{align*}

    \paragraph{Exercise 28}
    \begin{proof}
        \pf
        \step{1}{$G : \mathcal{P} A \rightarrow \mathcal{P} B$}
        \begin{proof}
            \pf\ Since $f[\![X]\!] \subseteq \ran f \subseteq B$
        \end{proof}
        \step{2}{For all $X, Y \in \mathcal{P} A$, if $G(X) = G(Y)$ then $X = Y$}
        \begin{proof}
            \step{a}{\pflet{$X, Y \in \mathcal{P} A$}}
            \step{b}{\assume{$f[\![X]\!] = f[\![Y]\!]$}}
            \step{c}{$X \subseteq Y$}
            \begin{proof}
                \step{i}{\pflet{$x \in X$}}
                \step{ii}{$f(x) \in f[\![X]\!]$}
                \step{iii}{$f(x) \in f[\![Y]\!]$}
                \step{iv}{\pick\ $y \in Y$ such that $f(x) = f(y)$}
                \step{v}{$x = y$}
                \begin{proof}
                    \pf\ Because $f$ is one-to-one.
                \end{proof}
                \step{vi}{$x \in Y$}
                \begin{proof}
                    \pf\ Similar.
                \end{proof}
            \end{proof}
            \step{d}{$Y \subseteq X$}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Example 29}

    \begin{proof}
        \pf
        \step{1}{\assume{$f$ maps $A$ onto $B$}}
        \step{2}{\pflet{$b, b' \in B$}}
        \step{3}{\assume{$G(b) = G(b')$}}
        \step{4}{\pick\ $x \in A$ such that $f(x) = b$}
        \begin{proof}
            \pf\ By \stepref{1}.
        \end{proof}
        \step{5}{$x \in G(b)$}
        \step{6}{$x \in G(b')$}
        \step{7}{$f(x) = b'$}
        \step{8}{$b = b'$}
        \qed
    \end{proof}

    The converse does not hold. Let $A = \{0\}$ and $B = \{0,1\}$. Let $f$ be the function that maps 0 to 0.
    Then
    \begin{align*}
        G(0) & = \{ 0 \} \\
        G(1) & = \emptyset
    \end{align*}
    Thus $G$ is one-to-one but $f$ does not map $A$ onto $B$.

    \paragraph{Exercise 30}
    \subparagraph{(a)}
    \begin{proof}
        \pf
        \step{1}{$F(B) = B$}
        \begin{proof}
            \step{a}{$F(B) \subseteq B$}
            \begin{proof}
                \step{ii}{\pflet{$X \in \mathcal{P} A$ be such that $F(X) \subseteq X$} \prove{$F(B) \subseteq X$}}
                \step{iii}{$B \subseteq X$}
                \step{iv}{$F(B) \subseteq F(X)$}
                \step{v}{$F(B) \subseteq X$}
                \begin{proof}
                    \pf\ From \stepref{ii} and \stepref{iv}.
                \end{proof}
            \end{proof}
            \step{b}{$B \subseteq F(B)$}
            \begin{proof}
                \pf\ From \stepref{a} and the definition of $B$, since $B$ is one of the sets $X$ such that
                $F(X) \subseteq X$
            \end{proof}
        \end{proof}
        \step{2}{$F(C) = C$}
        \begin{proof}
            \step{a}{$C \subseteq F(C)$}
            \begin{proof}
                \step{i}{\pflet{$X \in \mathcal{P} A$ with $X \subseteq F(X)$} \prove{$X \subseteq F(C)$}}
                \step{ii}{$X \subseteq C$}
                \step{iii}{$F(X) \subseteq F(C)$}
                \step{iv}{$X \subseteq F(C)$}
                \begin{proof}
                    \pf\ From \stepref{i} and \stepref{iii}
                \end{proof}
            \end{proof}
            \step{b}{$F(C) \subseteq C$}
            \begin{proof}
                \pf\ From \stepref{a} and the definition of $C$.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \subparagraph{(b)}
    If $F(X) = X$ then we have $B \subseteq X$ (because $F(X) \subseteq X$) and $X \subseteq C$
    (because $X \subseteq F(X)$).

    \section{Infinite Cartesian Products}

    \paragraph{Exercise 31}
    \begin{proof}
        \pf
        \step{1}{If the Axiom of Choice is true then, for any set $I$ and any function $H$ with domain
        $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$.}
        \begin{proof}
            \step{a}{\assume{The Axiom of Choice.}}
            \step{b}{\pflet{$I$ be a set.}}
            \step{c}{\pflet{$H$ be a function with domain $I$.}}
            \step{d}{\assume{$H(i) \neq \emptyset$ for all $i \in I$.}}
            \step{e}{\pflet{$R = \{ (i,x) : i \in I, x \in H(i) \}$}}
            \step{f}{\pick\ a function $F \subseteq R$ with $\dom F = \dom R$ \prove{$F \in \prod_{i \in I} H(i)$}}
            \begin{proof}
                \pf\ By the Axiom of Choice.
            \end{proof}
            \step{g}{$\dom H = I$}
            \begin{proof}
                \pf\ We have $\dom R = I$ since for all $i \in I$ there exists $x$ such that $x \in H(i)$.
            \end{proof}
            \step{h}{$\forall i \in I. F(i) \in H(i)$}
            \begin{proof}
                \pf\ Since $iRF(i)$.
            \end{proof}
        \end{proof}
        \step{2}{If, for any set $I$ and any function $H$ with domain
        $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$,
        then the Axiom of Choice is true.}
        \begin{proof}
            \step{a}{\assume{For any set $I$ and any function $H$ with domain
            $I$, if $H(i) \neq \emptyset$ for all $i \in I$, then $\prod_{i \in I} H(i) \neq \emptyset$}}
            \step{b}{\pflet{$R$ be a relation}}
            \step{c}{\pflet{$I = \dom R$}}
            \step{d}{Define the function $H$ with domain $I$ by: for $i \in I$, $H(i) = \{ y : iRy \}$}
            \step{e}{$H(i) \neq \emptyset$ for all $i \in I$}
            \step{f}{\pick\ $F \in \prod_{i \in I} H(i)$}
            \begin{proof}
                \pf\ By \stepref{a}
            \end{proof}
            \step{g}{$F$ is a function}
            \step{h}{$F \subseteq R$}
            \begin{proof}
                \pf\ For all $i \in I$ we have $F(i) \in H(i)$ and so $iRF(i)$.
            \end{proof}
            \step{i}{$\dom F = \dom R$}
        \end{proof}
        \qed
    \end{proof}

    \section{Equivalence Relations}

    \paragraph{Exercise 32}
    \subparagraph{(a)}
    \begin{align*}
        & \text{$R$ is symmetric} \\
        \Leftrightarrow & \forall x,y(xRy \Rightarrow yRx) \\
        \Leftrightarrow & \forall x,y(\langle y,x \rangle \in R^{-1} \Rightarrow \langle y,x \rangle \in R) \\
        \Leftrightarrow & R^{-1} \subseteq R
    \end{align*}

    \subparagraph{(b)}
    \begin{align*}
        & \text{$R$ is transitive} \\
        \Leftrightarrow & \forall x,y,z(xRy \ \&\ yRz \Rightarrow xRz) \\
        \Leftrightarrow & \forall x,z(\exists y(xRy\ \&\ yRz) \Rightarrow xRz) \\
        \Leftrightarrow & \forall x,z(\langle x,z \rangle \in R \circ R \Rightarrow \langle x,z \rangle \in R) \\
        \Leftrightarrow & R \circ R \subseteq R
    \end{align*}

    \paragraph{Exercise 33}
    \begin{proof}
        \pf
        \step{1}{If $R$ is a symmetric and transitive relation then $R = \inv{R} \circ R$.}
        \begin{proof}
            \step{a}{\assume{$R$ is a symmetric and transitive relation.}}
            \step{b}{$R \subseteq \inv{R} \circ R$}
            \begin{proof}
                \step{i}{\pflet{$xRy$}}
                \step{ii}{$yRy$}
                \begin{proof}
                    \pf\ By Theorem 3M.
                \end{proof}
                \step{ii}{$xRy$ and $yR^{-1}y$}
                \step{iii}{$x(R^{-1}\circ R)y$}
            \end{proof}
            \step{c}{$\inv{R} \circ R \subseteq R$}
            \begin{proof}
                \pf
                \begin{align*}
                    \inv{R} \circ R & \subseteq R \circ R & (\text{Exercise 32(a)}) \\
                    & \subseteq R & (\text{Exercise 32(b)})
                \end{align*}
            \end{proof}
        \end{proof}
        \step{2}{If $R = \inv{R} \circ R$ then $R$ is a symmetric and transitive relation.}
        \begin{proof}
            \step{a}{\assume{$R = \inv{R} \circ R$}}
            \step{b}{$R$ is a relation.}
            \step{c}{$R$ is symmetric.}
            \begin{proof}
                \step{i}{\pflet{$xRy$}}
                \step{ii}{\pick\ $z$ such that $xRz$ and $z\inv{R}y$}
                \step{iii}{$yRz$ and $z\inv{R}x$}
                \step{iv}{$y(\inv{R} \circ R)x$}
                \step{v}{$yRx$}
            \end{proof}
            \step{d}{$R$ is transitive.}
            \begin{proof}
                \step{i}{\pflet{$xRy$ and $yRz$}}
                \step{ii}{$zRy$}
                \begin{proof}
                    \pf\ By \stepref{c}
                \end{proof}
                \step{iii}{$xRy$ and $y\inv{R}z$}
                \step{iv}{$x(\inv{R} \circ R)z$}
                \step{v}{$xRz$}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 34}
    \subparagraph{(a)}
    $\bigcap \mathcal{A}$ is a transitive relation.
    \begin{proof}
        \pf
        \step{a}{$\bigcap \mathcal{A}$ is a relation.}
        \begin{proof}
            \pf\ Every member of a member of $\mathcal{A}$ is an ordered pair.
        \end{proof}
        \step{b}{$\bigcap \mathcal{A}$ is transitive.}
        \begin{proof}
            \step{i}{\pflet{$\langle x,y \rangle$ and $\langle y,z \rangle$ be in $\bigcap \mathcal{A}$}
            \prove{$\langle x,z \rangle \in \bigcap \mathcal{A}$}}
            \step{ii}{\pflet{$R \in \mathcal{A}$}}
            \step{iii}{$xRy$ and $yRz$}
            \step{iv}{$xRz$}
            \begin{proof}
                \pf\ Since $R$ is transitive.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \subparagraph{(b)}
    Not necessarily. If $\mathcal{A} = \{ \{ \langle 0, 1 \rangle \}, \{ \langle 1,2 \rangle \} \}$
    then each member of $\mathcal{A}$ is transitive but $\bigcup \mathcal{A} = \{ \langle 0,1 \rangle,
    \langle 1,2 \rangle \}$ is not.

    \paragraph{Example 35}
    \begin{align*}
        R[\![\{x\}]\!] & = \{ y : \exists z(z \in \{x\} \ \&\ zRy) \} \\
        & = \{y : \exists z(z = x\ \&\ zRy) \} \\
        & = \{y : xRy \} \\
        & = [x]_R
    \end{align*}

    \paragraph{Example 36}

    \begin{proof}
        \pf
        \step{1}{$Q$ is a relation on $A$.}
        \begin{proof}
            \pf\ By definition.
        \end{proof}
        \step{2}{$Q$ is reflexive on $A$.}
        \begin{proof}
            \step{a}{\pflet{$x \in A$}}
            \step{b}{$f(x)Rf(x)$}
            \begin{proof}
                \pf\ Since $R$ is reflexive on $B$.
            \end{proof}
            \step{c}{$xQx$}
        \end{proof}
        \step{3}{$Q$ is symmetric.}
        \begin{proof}
            \step{a}{\assume{$xQy$}}
            \step{b}{$f(x)Rf(y)$}
            \step{c}{$f(y)Rf(x)$}
            \begin{proof}
                \pf\ $R$ is symmetric.
            \end{proof}
            \step{d}{$yQx$}
        \end{proof}
        \step{4}{$Q$ is transitive.}
        \begin{proof}
            \step{a}{\assume{$xQy$ and $yQz$}}
            \step{b}{$f(x)Rf(y)$ and $f(y)Rf(z)$}
            \step{c}{$f(x)Rf(z)$}
            \begin{proof}
                \pf\ $R$ is transitive.
            \end{proof}
            \step{d}{$xQz$}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 37}

    \begin{proof}
        \pf
        \step{1}{$R_\Pi$ is a relation on $A$.}
        \begin{proof}
            \pf\ If $B \in \Pi$, $x \in B$ and $y \in B$ then $x,y \in A$.
        \end{proof}
        \step{2}{$R_\Pi$ is reflexive on $A$.}
        \begin{proof}
            \step{a}{\pflet{$x \in A$}}
            \step{b}{\pick\ $B \in \Pi$ such that $x \in B$}
            \begin{proof}
                \pf\ Because $\Pi$ is exhaustive.
            \end{proof}
            \step{c}{$x \in B$ and $x \in B$}
            \step{d}{$xR_\Pi x$}
        \end{proof}
        \step{3}{$R_\Pi$ is symmetric.}
        \begin{proof}
            \step{a}{\assume{$xR_\Pi y$}}
            \step{b}{\pick\ $B \in \Pi$ such that $x \in B$ and $y \in B$}
            \step{c}{$y \in B$ and $x \in B$}
            \step{d}{$yR_\Pi x$}
        \end{proof}
        \step{4}{$R_\Pi$ is transitive.}
        \begin{proof}
            \step{a}{\assume{$xR_\Pi y$ and $yR_\Pi z$}}
            \step{b}{\pick\ $B \in \Pi$ such that $x \in B$ and $y \in B$}
            \step{c}{\pick\ $C \in \Pi$ such that $y \in C$ and $z \in C$}
            \step{d}{$B = C$}
            \begin{proof}
                \pf\ Since $y \in B$ and $y \in C$
            \end{proof}
            \step{e}{$x \in B$ and $z \in B$}
            \step{f}{$xR_\Pi z$}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 38}

    \begin{proof}
        \pf
        \step{0}{If $B \in \Pi$ and $x \in B$ then $B = [x]_{R_\Pi}$}
        \begin{proof}
            \step{a}{\pflet{$B \in \Pi$}}
            \step{b}{\pflet{$x \in B$}}
            \step{c}{$[x]_{R_\Pi} \subseteq B$}
            \begin{proof}
                \step{i}{\pflet{$y \in [x]_{R_\Pi}$}}
                \step{ii}{$xR_\Pi y$}
                \step{iii}{\pick\ $C \in \Pi$ such that $x \in C$ and $y \in C$}
                \step{iv}{$B = C$}
                \begin{proof}
                    \pf\ Since $x \in B$ and $x \in C$.
                \end{proof}
                \step{v}{$y \in B$}
            \end{proof}
            \step{d}{$B \subseteq [x]_{R_\Pi}$}
            \begin{proof}
                \pf\ For all $y \in B$, we have $x \in B$ and $y \in B$ hence $x R_\Pi y$.
            \end{proof}
        \end{proof}
        \step{1}{$A/R_\Pi \subseteq \Pi$}
        \begin{proof}
            \step{a}{\pflet{$x \in A$} \prove{$[x]_{R_\Pi} \in \Pi$}}
            \step{b}{\pick\ $B \in \Pi$ such that $x \in B$}
            \step{c}{$[x]_{R_\Pi} = B$}
            \begin{proof}
                \pf\ By \stepref{0}
            \end{proof}
            \step{d}{$[x]_{R_\Pi} \in \Pi$}
        \end{proof}
        \step{2}{$\Pi \subseteq A/R_\Pi$}
        \begin{proof}
            \step{a}{\pflet{$B \in \Pi$}}
            \step{b}{\pick\ $x \in B$}
            \begin{proof}
                \pf\ Since every member of $\Pi$ is nonempty.
            \end{proof}
            \step{c}{$B = [x]_{R_\Pi}$}
            \begin{proof}
                \pf\ By \stepref{0}.
            \end{proof}
            \step{d}{$B \in A/R_\Pi$}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 39}

    \begin{proof}
        \pf
        \step{1}{$R_\Pi \subseteq R$}
        \begin{proof}
            \step{a}{\pflet{$xR_\Pi y$}}
            \step{b}{\pick\ $B \in \Pi$ such that $x \in B$ and $y \in B$}
            \step{c}{\pick\ $z \in A$ such that $B = [z]_R$}
            \step{d}{$z R x$}
            \step{e}{$z R y$}
            \step{f}{$x R y$}
            \begin{proof}
                \pf\ Since $R$ is symmetric and transitive.
            \end{proof}
        \end{proof}
        \step{2}{$R \subseteq R_\Pi$}
        \begin{proof}
            \step{a}{\pflet{$xRy$}}
            \step{b}{$x \in [x]_R$}
            \step{c}{$y \in [x]_R$}
            \step{d}{$x R_\Pi y$}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 40}
    We have $[2]_R = [3]_R$ but $[6]_R \neq [9]_R$ so there is no such function $f$.

    \paragraph{Exercise 41}
    \subparagraph{(a)}
    \begin{proof}
        \pf
        \step{1}{$Q$ is reflexive on $\mathbb{R} \times \mathbb{R}$.}
        \begin{proof}
            \pf\ For any $x, y \in \mathbb{R}$, we have $x + y = x + y$,
            hence $\langle x,y \rangle Q \langle x,y \rangle$
        \end{proof}
        \step{2}{$Q$ is symmetric.}
        \begin{proof}
            \step{a}{\assume{$\langle u,v \rangle Q \langle x,y \rangle$}}
            \step{b}{$u + y = x + v$}
            \step{c}{$x + v = u + y$}
            \step{d}{$\langle x,y \rangle Q \langle u,v \rangle$}
        \end{proof}
        \step{3}{$Q$ is transitive.}
        \begin{proof}
            \step{a}{\assume{$\langle a,b \rangle Q \langle u,v \rangle$ and
            $\langle u,v \rangle Q \langle x,y \rangle$}}
            \step{b}{$a+v=u+b$}
            \step{c}{$u+y=x+v$}
            \step{d}{$a+y+x+b$}
            \begin{proof}
                \pf\ Adding \stepref{b} and \stepref{c} gives $a + u + v + y = b + u + v + x$.
            \end{proof}
            \step{e}{$\langle a,b \rangle Q \langle x,y \rangle$}
        \end{proof}
        \qed
    \end{proof}

    \subparagraph{(b)}
    We prove that, if $\langle u,v \rangle Q \langle x,y \rangle$ then $\langle u+2v,v+2u \rangle
    Q \langle x+2y,y+2x \rangle$. It follows from Theorem 3Q that the function $G$ exists.

    If $u+y=v+x$ then $u + 2v + y + 2x = v + 2u + x + 2y$ by adding $u + v + y + x$ to both sides.

    \paragraph{Exercise 42}
    Assume that $R$ is an equivalence relation on $A$ and that $F : A \times A \rightarrow A$.
    Let us say that $F$ is \emph{compatible} with $R$ iff, whenever $xRx'$ and $yRy'$, then $F(\langle x,y \rangle) R F(\langle x',y' \rangle)$.
    If $F$ is compatible with $R$ then there exists a unique $\hat{F} : (A / R) \times (A / R) \rightarrow A / R$ such that
    \[ \hat{F}(\langle [x]_R, [y]_R \rangle) = [F(\langle x,y \rangle)]_R \text{ for all } x,y \in A \enspace . \]
    If $F$ is not compatible with $R$ then no such $\hat{F}$ exists.

    \section{Ordering Relations}

    \paragraph{Exercise 43}
    \begin{proof}
        \pf
        \step{1}{$\inv{R}$ is transitive.}
        \begin{proof}
            \step{a}{\assume{$x \inv{R} y$ and $y \inv{R} z$}}
            \step{b}{$zRy$ and $yRx$}
            \step{c}{$zRx$}
            \begin{proof}
                \pf\ Since $R$ is transitive.
            \end{proof}
            \step{d}{$x\inv{R}z$}
        \end{proof}
        \step{2}{$\inv{R}$ satisfies trichotomy on $A$.}
        \begin{proof}
            \step{a}{\pflet{$x, y \in A$}}
            \step{b}{Exactly one of $xRy$, $x=y$, $yRx$ holds.}
            \step{c}{Exactly one of $y\inv{R}x$, $x=y$, $x\inv{R}y$ holds.}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 44}
    \begin{proof}
        \pf
        \step{1}{$f$ is one-to-one.}
        \begin{proof}
            \step{a}{\pflet{$x,y \in A$ with $f(x) = f(y)$}}
            \step{b}{$f(x) < f(y)$ and $f(y) < f(x)$ do not hold.}
            \begin{proof}
                \pf\ By trichotomy.
            \end{proof}
            \step{c}{$x < y$ and $y < x$ do not hold.}
            \step{d}{$x = y$}
            \begin{proof}
                \pf\ By trichotomy.
            \end{proof}
        \end{proof}
        \step{2}{Whenever $f(x) < f(y)$ then $x < y$}
        \begin{proof}
            \step{a}{\pflet{$x,y \in A$ with $f(x) < f(y)$}}
            \step{b}{$f(x) = f(y)$ and $f(y) < f(x)$ do not hold.}
            \begin{proof}
                \pf\ By trichotomy.
            \end{proof}
            \step{c}{$x = y$ and $y < x$ do not hold.}
            \step{d}{$x < y$}
            \begin{proof}
                \pf\ By trichotomy.
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 45}
    \begin{proof}
        \pf
        \step{1}{$<_L$ is transitive.}
        \begin{proof}
            \step{a}{\pflet{$\langle a_1,b_1 \rangle <_L \langle a_2,b_2 \rangle$ and 
            $\langle a_2, b_2 \rangle <_L \langle a_3, b_3 \rangle$}
            \prove{$\langle a_1, b_1 \rangle < \langle a_3, b_3 \rangle$}}
            \step{b}{\case{$a_1 <_A a_2$ and $a_2 <_A a_3$}}
            \begin{proof}
                \pf\ Then $a_1 <_A <_3$
            \end{proof}
            \step{c}{\case{$a_1 <_A a_2$, $a_2 = a_3$, $b_2 <_B b_3$}}
            \begin{proof}
                \pf\ Then $a_1 <_A <_3$
            \end{proof}
            \step{d}{\case{$a_1 = a_2$, $b_1 <_B b_2$ and $a_2 <_A a_3$}}
            \begin{proof}
                \pf\ Then $a_1 <_A <_3$
            \end{proof}
            \step{e}{\case{$a_1 = a_2$, $b_1 <_B b_2$, $a_2 = a_3$, $b_2 <_B b_3$}}
            \begin{proof}
                \pf\ Then $a_1 = a_3$ and $b_1 <_B b_3$
            \end{proof}
        \end{proof}
        \step{2}{$<_L$ satisfies trichotomy on $A \times B$.}
        \begin{proof}
            \step{a}{\pflet{$\langle a_1, b_1 \rangle$ and $\langle a_2, b_2 \rangle$ be elements of $A \times B$}}
            \step{b}{Exactly one of $a_1 <_A a_2$, $a_1 = a_2$, $a_2 <_A a_1$ holds.}
            \step{c}{Exactly one of $b_1 <_B b_2$, $b_1 = b_2$, $b_2 <_B b_1$ holds.}
            \step{d}{Exactly one of $a_1 <_A a_2$, ($a_1 = a_2$ and $b_1 <_B b_2$), ($a_1 = a_2$ and $b_1 = b_2$),
            ($a_1 = a_2$ and $b_2 <_L b_1$), $a_2 <_A a_1$ holds.}
            \step{e}{Exactly one of $\langle a_1, b_1 \rangle <_L \langle a_2, b_2 \rangle$,
            $\langle a_1, b_1 \rangle = \langle a_2, b_2 \rangle$,
            $\langle a_2, b_2 \rangle <_L \langle a_1, b_1 \rangle$ holds.}
        \end{proof}
        \qed
    \end{proof}

    \section{Review Exercises}

    \paragraph{Exercise 46}
    \subparagraph{(a)}
    \begin{align*}
        \bigcap \bigcap \langle x,y \rangle & = \bigcap \{ x \} \\
        & = x
    \end{align*}

    \subparagraph{(b)}
    \begin{align*}
        \bigcap \bigcap \bigcap \{ \langle x,y \rangle \}^{-1}
        & = \bigcap \bigcap \bigcap \{ \langle y,x \rangle \} \\
        & = \bigcap \bigcap \langle y,x \rangle \\
        & = y & (\text{by part (a)})
    \end{align*}

    \paragraph{Exercise 47}
    \subparagraph{(a)}
    There are eight:
    \begin{align*}
        \{ \langle 0, 3 \rangle, \langle 1, 3 \rangle, \langle 2, 3 \rangle \}, \\
        \{ \langle 0, 3 \rangle, \langle 1, 3 \rangle, \langle 2, 4 \rangle \}, \\
        \{ \langle 0, 3 \rangle, \langle 1, 4 \rangle, \langle 2, 3 \rangle \}, \\
        \{ \langle 0, 3 \rangle, \langle 1, 4 \rangle, \langle 2, 4 \rangle \}, \\
        \{ \langle 0, 4 \rangle, \langle 1, 3 \rangle, \langle 2, 3 \rangle \}, \\
        \{ \langle 0, 4 \rangle, \langle 1, 3 \rangle, \langle 2, 4 \rangle \}, \\
        \{ \langle 0, 4 \rangle, \langle 1, 4 \rangle, \langle 2, 3 \rangle \}, \\
        \{ \langle 0, 4 \rangle, \langle 1, 4 \rangle, \langle 2, 4 \rangle \}
    \end{align*}

    \subparagraph{(b)}
    There are six:
    \begin{align*}
        \{ \langle 0,3 \rangle, \langle 1, 4 \rangle, \langle 2, 5 \rangle \}, \\
        \{ \langle 0,3 \rangle, \langle 1, 5 \rangle, \langle 2, 4 \rangle \}, \\
        \{ \langle 0,4 \rangle, \langle 1, 3 \rangle, \langle 2, 5 \rangle \}, \\
        \{ \langle 0,4 \rangle, \langle 1, 5 \rangle, \langle 2, 3 \rangle \}, \\
        \{ \langle 0,5 \rangle, \langle 1, 3 \rangle, \langle 2, 4 \rangle \}, \\
        \{ \langle 0,5 \rangle, \langle 1, 4 \rangle, \langle 2, 3 \rangle \}
    \end{align*}

    \paragraph{Exercise 48}
    \subparagraph{(a)}
    The only ordered pair in $\mathcal{P} T$ is $\langle \emptyset, \emptyset \rangle = \{ \{ \emptyset \} \}$.

    \subparagraph{(b)}
    \begin{align*}
        (\mathcal{P} T)^{-1} \circ (\mathcal{P} T \restriction \{ \emptyset \})
        & = \{ \langle \emptyset, \emptyset \rangle \} \circ \{ \langle \emptyset, \emptyset \rangle \} \\
        & = \{ \langle \emptyset, \emptyset \rangle \}
    \end{align*}

    \paragraph{Exercise 49}
    There are six:
    \begin{align*}
        \{ \langle 0,0 \rangle, \langle 1,1 \rangle, \langle 2,2 \rangle \}, \\
        \{ \langle 0,0 \rangle, \langle 0,1 \rangle, \langle 1,0 \rangle, \langle 1,1 \rangle, \langle 2,2 \rangle \}, \\
        \{ \langle 0,0 \rangle, \langle 0,2 \rangle, \langle 1,1 \rangle, \langle 2,0 \rangle, \langle 2,2 \rangle \}, \\
        \{ \langle 0,0 \rangle, \langle 1,1 \rangle, \langle 1,2 \rangle, \langle 2,1 \rangle, \langle 2,2 \rangle \}, \\
        \{ \langle 0,0 \rangle, \langle 0,1 \rangle, \langle 0,2 \rangle,
        \langle 1,0 \rangle, \langle 1,1 \rangle, \langle 1,2 \rangle,
        \langle 2,0 \rangle, \langle 2,1 \rangle, \langle 2,2 \rangle \}
    \end{align*}

    \paragraph{Exercise 50}
    \subparagraph{(a)}
    $\{ \langle 0,1 \rangle, \langle 0,2 \rangle, \langle 0,3 \rangle, \langle 1,3 \rangle,
    \langle 2,1 \rangle, \langle 2,3 \rangle \}$
    \subparagraph{(b)}
    $\{ \langle 0,1 \rangle, \langle 0,2 \rangle, \langle 0,3 \rangle,
    \langle 2,1 \rangle, \langle 3,1 \rangle, \langle 3,2 \rangle \}$

    \paragraph{Exercise 51}
    There are three:
    \begin{align*}
        \{ \langle 1,0 \rangle, \langle 1,2 \rangle, \langle 2,0 \rangle \}, \\
        \{ \langle 1,0 \rangle, \langle 2,0 \rangle, \langle 2,1 \rangle \}, \\
        \{ \langle 0,1 \rangle, \langle 2,0 \rangle, \langle 2,1 \rangle \}
    \end{align*}

    \paragraph{Exercise 52}
    We can conclude this if we know that $A$ and $B$ are nonempty, or that $C$ and $D$ are nonempty.

    Suppose $A$ and $B$ are nonempty. Then $A \times B = C \times D \neq \emptyset$ so $C$ and $D$ are nonempty.
    We now prove $A \subseteq C$.

    Let $a \in A$. Pick some $b \in B$. Then $\langle a,b \rangle \in A \times B = C \times D$ and so $a \in C$.

    We can similarly prove $C \subseteq A$, $B \subseteq D$ and $D \subseteq B$.

    \paragraph{Exercise 53}
    \begin{align*}
        x(R \cup S)^{-1} y & \Leftrightarrow y (R \cup S) x \\
        & \Leftrightarrow yRx \text{ or } ySx \\
        & \Leftrightarrow xR^{-1}y \text{ or } xS^{-1}y \\
        & \Leftrightarrow x(R^{-1} \cup S^{-1}) y \\
        x(R \cap S)^{-1} y & \Leftrightarrow y (R \cap S) x \\
        & \Leftrightarrow yRx \text{ and } ySx \\
        & \Leftrightarrow xR^{-1}y \text{ and } xS^{-1}y \\
        & \Leftrightarrow x(R^{-1} \cap S^{-1}) y \\
        x(R - S)^{-1} y & \Leftrightarrow y (R - S) x \\
        & \Leftrightarrow yRx \text{ and } \neg ySx \\
        & \Leftrightarrow xR^{-1}y \text{ and } \neg xS^{-1}y \\
        & \Leftrightarrow x(R^{-1} - S^{-1}) y
    \end{align*}

    \paragraph{Exercise 54}
    \subparagraph{(a)}
    \begin{align*}
        \langle x,y \rangle \in A \times (B \cap C) & \Leftrightarrow x \in A \ \&\ y \in B \ \&\ y \in C \\
        & \Leftarrow \langle x,y \rangle \in (A \times B) \cap (A \times C)
    \end{align*}

    \subparagraph{(b)}
    \begin{align*}
        \langle x,y \rangle \in A \times (B \cup C) & \Leftrightarrow x \in A \ \& (y \in B \text{ or } y \in C) \\
        & \Leftrightarrow (x \in A \ \&\ y \in B) \text{ or } (x \in A \ \&\ y \in C) \\
        & \Leftrightarrow \langle x,y \rangle \in (A \times B) \cup (A \times C)
    \end{align*}

    \subparagraph{(c)}
    \begin{align*}
        \langle x,y \rangle \in A \times (B - C) & \Leftrightarrow x \in A \ \&\ y \in B \ \&\ y \notin C \\
        & \Leftrightarrow \langle x,y \rangle \in (A \times B) - (A \times C)
    \end{align*}

    \paragraph{Exercise 55}
    \subparagraph{(a)}
    No. Take $A = \{0\}$, $B = \{1\}$, $C = \{2\}$. Then $(A \times A) \cup (B \times C) = \{ \langle 0,0
    \rangle, \langle 1,2 \rangle \}$ while $(A \cup B) \times (A \cup C) = \{
        \langle 0,0 \rangle, \langle 0,2 \rangle, \langle 1,0 \rangle, \langle 1,2 \rangle \}$.

    \subparagraph{(b)}
    Yes.
    \begin{align*}
        \langle x,y \rangle \in (A \times A) \cap (B \times C)
        & \Leftrightarrow x \in A\ \&\ y \in A\ \&\ x \in B\ \&\ y \in C \\
        & \Leftrightarrow \langle x,y \rangle \in (A \cap B) \times (A \cap C)
    \end{align*}

    \paragraph{Exercise 56}
    \subparagraph{(a)}
    Yes.
    \begin{align*}
        x \in \dom (R \cup S) & \Leftrightarrow \exists y (xRy \text{ or } xSy) \\
        & \Leftrightarrow \exists y.xRy \text{ or } \exists y.xSy \\
        & \Leftrightarrow x \in \dom R \cup \dom S
    \end{align*}

    \subparagraph{(b)}
    No. Take $R = \{ \langle 0,0 \rangle \}$ and $S = \{ \langle 0,1 \rangle \}$. Then $\dom (R \cap S)
    = \dom \emptyset = \emptyset$ while $\dom R \cap \dom S = \{ 0 \} \cap \{ 0 \} = \{ 0 \}$.

    \paragraph{Exercise 57}
    \subparagraph{(a)}
    Yes.
    \begin{align*}
        x(R\circ(S \cup T))y & \Leftrightarrow \exists z (x(S \cup T)z \ \&\ zRy) \\
        & \Leftrightarrow \exists z (xSz \ \&\ zRy) \text{ or } \exists z(xTz\ \&\ zRy) \\
        & \Leftrightarrow x((R\circ S)\cup(R\circ T)) y
    \end{align*}

    \subparagraph{(b)}
    No. Take $R = \{ \langle 0,0 \rangle, \langle 1,0 \rangle \}$, $S = \{ \langle 0,0 \rangle \}$
    and $T = \{ \langle 0,1 \rangle \}$. Then
    \begin{align*}
        R \circ (S \cap T) & = R \circ \emptyset \\
        & = \emptyset \\
        (R \circ S) \cap (R \circ T) & = \{ \langle 0,0 \rangle \} \cap \{ \langle 0,0 \rangle \} \\
        & = \{ \langle 0,0 \rangle \}
    \end{align*}

    \paragraph{Exercise 58}
    Take $F = \emptyset$ and $S = \{ \emptyset \}$. Then $F [\![ F^{-1} [\![ S ]\!] ]\!] = \emptyset \neq S$.

    \paragraph{Exercise 59}
    \begin{align*}
        x (Q \restriction (A \cap B)) y & \Leftrightarrow xQy\ \&\ x \in A\ \&\ x \in B \\
        & \Leftrightarrow x ((Q \restriction A) \cap (Q \restriction B)) y \\
        x (Q \restriction (A - B)) y & \Leftrightarrow xQy\ \&\ x \in A\ \&\ x \notin B \\
        & \Leftrightarrow (xQy\ \&\ x \in A) \ \&\ \neg (xQy\ \&\ x \in B) \\
        & \Leftrightarrow x ((Q \restriction A) - (Q \restriction B)) y
    \end{align*}

    \paragraph{Exercise 60}
    \begin{align*}
        x((R \circ S) \restriction A) y & \Leftrightarrow \exists z (xRz\ \&\ zSy\ \&\ x \in A) \\
        & \Leftrightarrow x(R \circ (S \restriction A)) y
    \end{align*}

    \chapter{Chapter 4 --- Natural Numbers}

    \section{Inductive Sets}

    \paragraph{Exercise 1}
    We have 
    \[ 3 = 2 \cup \{ 2 \} = 1 \cup \{ 1, 2 \} \]
    and so $1 \in 3$. But $1 \notin 1$ (since $1 = \{ \emptyset \}$ and we know $\{ \emptyset \} \neq
    \emptyset$ hence $\{ \emptyset \} \notin \{ \emptyset \}$). Therefore $1 \neq 3$.

    \section{Peano's Postulates}

    \paragraph{Exercise 2}
    If $a$ is a transitive set then
    \begin{align*}
        \bigcup (a^+) & = a & (\text{Theorem 4E}) \\
        & \subseteq a^+
    \end{align*}

    \paragraph{Exercise 3}
    \subparagraph{(a)}
    Suppose $a$ is a transitive set. Then $a \subseteq \mathcal{P} a$. Hence we have
    $\bigcup \mathcal{P} a = a \subseteq \mathcal{P} a$ and so $\mathcal{P} a$.
    
    \subparagraph{(b)}
    Suppose $\mathcal{P} a$ is a transitive set. Then $a = \bigcup \mathcal{P} a \subseteq \mathcal{P} a$
    hence $a$ is transitive.

    \paragraph{Exercise 4}
    If $a$ is a transitive set then $\bigcup a \subseteq a$ so $\bigcup \bigcup a \subseteq \bigcup a$.
    Hence $\bigcup a$ is transitive.

    \paragraph{Exercise 5}
    \subparagraph{(a)}
    \begin{proof}
        \pf
        \step{1}{\pflet{$b \in \bigcup \mathcal{A}$}}
        \step{2}{\pick\ $A \in \mathcal{A}$ such that $b \in A$}
        \step{3}{$b \subseteq A$}
        \begin{proof}
            \pf\ Since $A$ is transitive.
        \end{proof}
        \step{4}{$b \subseteq \bigcup \mathcal{A}$}
        \qed
    \end{proof}

    \subparagraph{(b)}
    \begin{proof}
        \pf
        \step{1}{\pflet{$b \in \bigcap \mathcal{A}$}}
        \step{2}{For all $A \in \mathcal{A}$ we have $b \subseteq A$}
        \begin{proof}
            \pf\ Since $b \in A$ and $A$ is transitive.
        \end{proof}
        \step{3}{$b \subseteq \bigcap \mathcal{A}$}
        \qed
    \end{proof}

    \paragraph{Exercise 6}
    We have $\bigcup (a^+) = \bigcup a \cup a$ (see the proof of Theorem 4E). So if $\bigcup (a^+) = a$
    we have $\bigcup a \cup a = a$ and so $\bigcup a \subseteq a$.

    \section{Recursion on $\omega$}

    \paragraph{Exercise 7}
    We have $h_1(0) = h_2(0) = a$ so $0 \in S$.

    Now let $n \in S$; we prove $n^+ \in S$. We have $h_1(n) = h_2(n)$ and therefore
    \begin{align*}
        h_1(n^+) & = F(h_1(n)) \\
        & = F(h_2(n)) \\
        & = h_2(n^+)
    \end{align*}

    \paragraph{Exercise 8}
    \begin{proof}
        \pf
        \step{1}{$\forall m,n \in \omega. h(n) = h(m) \Rightarrow n = m$}
        \begin{proof}
            \step{a}{$\forall n \in \omega. h(n) = h(0) \Rightarrow n = 0$}
            \begin{proof}
                \step{i}{\pflet{$n \in \omega$}}
                \step{ii}{\assume{$h(n) = h(0)$}}
                \step{iii}{$h(n) = c$}
                \step{iv}{$\forall p \in \omega. n \neq p^+$}
                \begin{proof}
                    \pf\ Otherwise $f(h(p)) = c$ contradicting the fact that $c \in A - \ran f$.
                \end{proof}
                \step{v}{$n = 0$}
                \begin{proof}
                    \pf\ Theorem 4C.
                \end{proof}
            \end{proof}
            \step{b}{For all $m \in \omega$, if $\forall n \in \omega. h(n) = h(m) \Rightarrow n = m$,
                then $\forall n \in \omega. h(n) = h(m^+) \Rightarrow n = m^+$}
            \begin{proof}
                \step{i}{\pflet{$m \in \omega$}}
                \step{ii}{\assume{$\forall n \in \omega. h(n) = h(m) \Rightarrow n = m$}}
                \step{iii}{\pflet{$n \in \omega$}}
                \step{iv}{\assume{$h(n) = h(m^+)$}}
                \step{x}{$h(n) = f(h(m))$}
                \step{v}{$n \neq 0$}
                \begin{proof}
                    \pf\ Otherwise $c = f(h(m))$ contradicting the fact that $c \in A - \ran f$.
                \end{proof}
                \step{vi}{\pick\ $p$ such that $n = p^+$}
                \step{vii}{$f(h(p)) = f(h(m))$}
                \step{viii}{$h(p) = h(m)$}
                \begin{proof}
                    \pf\ $f$ is one-to-one.
                \end{proof}
                \step{ix}{$p = m$}
                \begin{proof}
                    \pf\ By \stepref{ii}.
                \end{proof}
                \step{x}{$n = p^+ = m^+$}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 9}
    \begin{proof}
        \pf
        \step{1}{$C^* \subseteq C_*$}
        \begin{proof}
            \step{a}{$f[\![ C_* ]\!] \subseteq C_*$}
            \begin{proof}
                \step{i}{\pflet{$x \in C_*$} \prove{$f(x) \in C_*$}}
                \step{ii}{\pick\ $n$ such that $x \in h(n)$}
                \step{iii}{$f(x) \in h(n^+)$}
                \step{iv}{$f(x) \in C_*$}
            \end{proof}
        \end{proof}
        \step{2}{$C_* \subseteq C^*$}
        \begin{proof}
            \step{a}{$\forall n \in \omega. h(n) \subseteq C^*$}
            \begin{proof}
                \step{i}{$h(0) \subseteq C^*$}
                \begin{proof}
                    \pf\ If $A \subseteq X \subseteq B$ and $f[\![X]\!] \subseteq X$ then $A \subseteq X$.
                \end{proof}
                \step{ii}{$\forall n \in \omega (h(n) \subseteq C^* \Rightarrow h(n^+) \subseteq C^*)$}
                \begin{proof}
                    \step{one}{\pflet{$n \in \omega$}}
                    \step{two}{\assume{$h(n) \subseteq C^*$}}
                    \step{three}{$f[\![h(n)]\!] \subseteq C^*$}
                    \begin{proof}
                        \step{A}{\pflet{$X$ be such that $A \subseteq X \subseteq B$ and $f[\![X]\!] \subseteq
                        X$} \prove{$f[\![h(n)]\!] \subseteq X$}}
                        \step{B}{$h(n) \subseteq X$}
                        \step{C}{$f[\![h(n)]\!] \subseteq f[\![X]\!]$}
                        \step{D}{$f[\![h(n)]\!] \subseteq X$}
                    \end{proof}
                    \step{four}{$h(n^+) \subseteq C^*$}
                \end{proof}
            \end{proof}
        \end{proof}
        \qed
    \end{proof}

    \paragraph{Exercise 10}
    $C^* = C_* = (0,1]$

    \paragraph{Exercise 11}
    $\{ n \in \mathbb{Z} \mid n \leq 0 \}$

    \paragraph{Exercise 12}
    Let $f : B \times B \rightarrow B$ and $A \subseteq B$. Let
    \[ C^* = \bigcap \{ X \mid A \subseteq X \subseteq B\ \&\ f[\![X \times X]\!] \subseteq X \} \enspace . \]
    Define the function $h : \omega \rightarrow \mathcal{P} B$ by
    \begin{align*}
        h(0) & = A \\
        h(n^+) & = h(n) \cup f[\![h(n) \times h(n)]\!] & (n \in \omega)
    \end{align*}
    Define $C_* = \bigcup \ran h$. Then $C^* = C_*$.

    \section{Arithmetic}

    \paragraph{Exercise 13}
    We prove the contrapositive. Assume $m \neq 0$ and $n \neq 0$. Then by Theorem 4C
    there are natural numbers $p$, $q$ such that $m = p^+$ and $n = q^+$. Hence
    $mn = p^+ q^+ = (p^+ q + p)^+ \neq 0$.

    \paragraph{Exercise 14}
    We prove the following facts for any natural number $n$:

    \begin{enumerate}
        \item $n$ is even if and only if $n^+$ is odd.
        \begin{proof}
            \pf\ If $n$ is even, say $n = 2p$, then $n^+ = 2p+1$ is odd.

            If $n^+$ is odd, say $n^+ = 2p+1$, then $n = 2p$ is even.
        \end{proof}
        \item $n$ is odd if and only if $n^+$ is even.
        \begin{proof}
            \pf\ If $n$ is odd, say $n = 2p+1$, then $n^+ = 2(p+1)$ is even.

            If $n^+$ is even, say $n^+ = 2p$, then we cannot have $p = 0$ (since $n^+ \neq 0$).
            So $p = q + 1$ for some $q$. But then $n^+ = 2q+2$ so $n = 2q+1$ and $n$ is odd.
        \end{proof}
    \end{enumerate}

    Now, 0 is even and 0 is not odd. By the two facts above, if $n$ is either even or odd but not both,
    then $n^+$ is either odd or even but not both. The result follows by induction.

    \paragraph{Exercise 15}
    We have
    \begin{align*}
        m + (n + 0) & = m + n & \text{by (A1)} \\
        & = (m + n) + 0 & \text{by (A1)}
    \end{align*}
    If $m + (n + p) = (m + n) + p$ then 
    \begin{align*}
        m + (n + p^+) & = m + (n + p)^+ & \text{by (A2)} \\
        & = (m + (n + p))^+ & \text{by (A2)} \\
        & = ((m + n) + p)^+ & \text{by induction hypothesis} \\
        & = (m + n) + p^+ & \text{by (A2)}
    \end{align*}

    \paragraph{Exercise 16}
    We first prove that $0 \cdot n = 0$ for all $n$. We have $0 \cdot 0 = 0$ by (M1), and if
    $0 \cdot n = 0$ then
    \begin{align*}
        0 \cdot n^+ & = 0 \cdot n + 0 & \text{by (M2)} \\
        & = 0 \cdot n & \text{by (A1)} \\
        & = 0 & \text{by induction hypothesis}
    \end{align*}

    Now we prove that $m^+ \cdot n = m \cdot n + n$ for all $m, n$. We have
    \begin{align*}
        m^+ \cdot 0 & = 0 & \text{by (M1)} \\
        m \cdot 0 + 0 & = m \cdot 0 & \text{by (A1)} \\
        & = 0 & \text{by (M1)}
    \end{align*}
    Thus, $m^+ \cdot 0 = m \cdot 0 + 0$.

    If $m^+ \cdot n = m \cdot n + n$ then
    \begin{align*}
        m^+ \cdot n^+ & = m^+ \cdot n + m^+ & \text{by (M2)} \\
        & = (m^+ \cdot n + m)^+ & \text{by (A2)} \\
        & = ((m \cdot n + n) + m)^+ & \text{by induction hypothesis} \\
        & = ((m \cdot n + m) + n)^+ & \text{by associativity and commutativity of addition} \\
        & = (m \cdot n^+ + n)^+ & \text{by (M2)} \\
        & = m \cdot n^+ + n^+ & \text{by (A2)}
    \end{align*}

    \paragraph{Exercise 17}
    The proof is by induction on $p$. We have
    \begin{align*}
        m^{n + 0} & = m^n & \text{by (A1)} \\
        & = 0 + m^n & \text{by Theorem 4K(2)} \\
        & = m^n \cdot 0 + m^n & \text{by (M1)} \\
        & = m^n \cdot 1 & \text{by (M2)} \\
        & = m^n \cdot m^0 & \text{by (E1)}
    \end{align*}
    If $m^{n+p} = m^n \cdot m^p$ then
    \begin{align*}
        m^{n+p^+} & = m^{(n+p)^+} & \text{by (A2)} \\
        & = m^{n+p} m & \text{by (E2) }\\
        & = (m^n m^p) m & \text{by induction hypothesis} \\
        & = m^n (m^p m) & \text{by Theorem 4K (4)} \\
        & = m^n m^{p^+} & \text{by (E2)}
    \end{align*}

    \section{Ordering on $\omega$}

    \paragraph{Exercise 18}
    \begin{align*}
        \in_\omega^{-1} [\![ \{ 7,8 \} ]\!]
        & = \{ x \in \omega \mid x \in 7 \text{ or } x \in 8 \} \\
        & = \{ 0, 1, 2, 3, 4, 5, 6, 7 \}
    \end{align*}

    \paragraph{Exercise 19}
    The proof is by induction on $m$.

    For $m = 0$, take $q = r = 0$. Then $m = d \cdot 0 + 0$ and $0 \in d$.

    Suppose $m = dq + r$ and $r < d$. Then $r + 1 \leq d$. If $r + 1 < d$, then we have $m + 1 = dq + (r + 1)$ as required.
    If $r + 1 = d$, then we have $m + 1 = dq + d = d(q+1) + 0$.

    \paragraph{Exercise 20}
    We first prove $A$ is closed downwards; that is, if $n \in A$ and $m \in n$ then $m \in A$. This holds
    because if $n \in A$ and $m \in n$ then $m \in \bigcup A$ and $\bigcup A = A$.

    Now, we prove $\forall n \in \omega. n \in A$ by induction on $n$.

    To prove $0 \in A$: we are given that $A$ is nonempty. Pick some $a \in A$. Then $0 \underline{in} a$
    so $0 \in A$ since $A$ is closed downwards.

    Now let $n \in A$; we prove $n^+ \in A$. We have $n \in \bigcup A$; pick some $k \in A$ such that $n \in k$.
    Then $n^+ \underline{\in} k$ so $n^+ \in A$ since $A$ is closed downwards.

    This completes the induction. We have $\forall n \in \omega. n \in A$, i.e. $A = \omega$.

    \paragraph{Exercise 21}
    Suppose $n$ is a natural number, $k \in n$ and $n \subseteq k$. Then $k \in k$, contradicting
    Lemma 4L(b).

    \paragraph{Exercise 22}
    We have $0 \in p^+$ (by trichotomy since $p^+ \notin 0$ because 0 is empty, and $p^+ \neq 0$ by Peano's
    First Postulate.) Hence $n = n + 0 \in n + p^+$ by Theorem 4N.

    \paragraph{Exercise 23}
    The proof is by induction on $n$. The statement is vacuously true for $n = 0$.

    Suppose the statement is true for $n$. Let $m \in n^+$. Then $m \underline{\in} n$.

    If $m = n$, then we have $m + 0^+ = n^+$.

    If $m \in n$, pick $p$ such that $m + p^+ = n$ by the induction hypothesis. Then $m + p^{++} = n^+$.

    \paragraph{Exercise 24}
    Suppose $m \in p$. Then we cannot have $n \in q$ or $n = q$, as either of these would imply
    $m + n \in p + q$. Hence $q \in n$ by trichotomy.

    We prove $q \in n \Rightarrow m \in p$ similarly.

    \paragraph{Exercise 25}
    By Exercise 23, pick natural numbers $a$ and $b$ such that $m = n + a^+$ and $p = q + b^+$.
    Then
    \begin{align*}
        mp + nq & = (n + a^+)(q + b^+) + nq \\
        & = nq + nq + a^+ q + n b^+ + a^+ b^+ \\
        & = (n + a^+) q + n (q + b^+) + a^+ b^+ \\
        & = mq + np + (a^+ + b)^+
    \end{align*}
    Hence $mq + np \in mp + nq$ by Exercise 22.

    \paragraph{Exercise 26}
    The proof is by induction on $n$.

    If $n = 0$ then $\ran f$ is a singleton and its sole element is the largest element.

    Suppose the result is true for $n$. Let $f : n^{++} \rightarrow A$. Then $f [\![ n^+ ]\!]$ has a largest
    element $f(k)$, say. If $f(k) \underline{\in} f(n^+)$ then $f(n^+)$
    is greatest in $\ran f$; otherwise $f(k)$ is greatest.

    \paragraph{Exercise 27}
    We prove $f_1(n) = f_2(n)$ for all $n \in \omega$ by strong induction on $n$.

    Assume that $(\forall m \in n) f_1(m) = f_2(m)$. Then $f_1 \restriction n = f_2 \restriction n$. So
    \begin{align*}
        f_1(n) & = G(f_1 \restriction n) \\
        & = G(f_2 \restriction n) \\
        & = f_2(n)
    \end{align*}

    \paragraph{Exercise 28}
    Suppose $\omega$ is not transitive. Then there exists a natural number $n$ such that $n \nsubseteq \omega$.
    Let $n$ be the least such number. There exists $x \in n$ such that $x \notin \omega$. Now, $n \neq 0$
    (because it is nonempty) so $n = p^+$ for some natural number $p$. We have $x \in p^+$ so $x \in p$
    or $x = p$. We cannot have $x = p$ (because $x$ is not a natural number) so we have $x \in p$.
    But this contradicts the minimality of $n$.

    \section{Review Exercises}

    \paragraph{Exercise 29}
    $4 = \{ \emptyset, \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \},
        \{ \emptyset, \{ \emptyset \}, \{ \emptyset, \{ \emptyset \} \} \} \}$

    \paragraph{Exercise 30}
    $\bigcup 4 = 0 \cup 1 \cup 2 \cup 3 = 3$ since $0$, $1$ and $2$ are all subsets of 3.

    $\bigcap 4 = 0 \cap 1 \cap 2 \cap 3 = 0 (= \emptyset)$.

    \paragraph{Exercise 31}
    Similarly to Exercise 30 we have $\bigcup \bigcup 7 = \bigcup 6 = 5$.

    \paragraph{Exercise 32}
    \subparagraph{(a)}
    $A^+ = A \cup \{ A \} = \{ 1, A \} = \{ 1, \{ 1 \} \}$

    So $\bigcup A^+ = 1 \cup \{ 1 \} = \{ 0, 1 \} = 2$

    \subparagraph{(b)}
    $\bigcup (\{2\}^+) = \bigcup \{ 2, \{ 2 \} \} = \{ 0, 1, 2 \} = 3$

    \paragraph{Exercise 33}
    \subparagraph{(a)}
    Yes - if $x \in y \in \{ 0, 1, \{ 1 \} \}$ then $x$ is either 0 or 1, and in either case
    $x \in \{ 0, 1, \{ 1 \} \}$

    \subparagraph{(b)}
    No - $0 \in 1 \in \{ 1 \}$ but $0 \notin \{ 1 \}$

    \subparagraph{(c)}
    No - $0 \in \{ 0 \} \in \langle 0,1 \rangle$ but $0 \notin \langle 0,1 \rangle$.

    \paragraph{Exercise 34}
    \subparagraph{(a)}
    Let $a = \{ \emptyset \}$ and $b = \emptyset$

    \subparagraph{(b)}
    Let $c = \{ \{ \emptyset \} \}$, $d = \{ \emptyset \}$ and $e = \emptyset$

    \paragraph{Exercise 35}
    \subparagraph{(a)}
    Let $T_1 = \{ \{1\}, \{1,0\}, 0, 1 \}$

    \subparagraph{(b)}
    Let $T_2 = \{ \langle 1, 0 \rangle, \{1\}, \{1,0\}, 0, 1 \}$.

    \paragraph{Exercise 36}
    \begin{align*}
        h(4) & = 2h(3) \\
        & = 4h(2) \\
        & = 8h(1) \\
        & = 16h(0) \\
        & = 48
    \end{align*}

    \paragraph{Exercise 37}
    \subparagraph{(a)}
    Let $f : m \rightarrow A$ and $g : n \rightarrow B$ be bijections. Define $h : m + n \rightarrow A \cup B$
    by
    \begin{align*}
        h(p) & = f(p) & \text{if } p \in m \\
        h(m + q) & = g(q) & \text{if } q \in n
    \end{align*}
    To show that this is well-defined, we must prove two things:
    \begin{enumerate}
        \item For all $p \in m + n$, then either $p \in m$ or there
    exists $q \in n$ such that $p = m + n$.
        \item We never have $p \in m$ and $p = m + q$ for some $q \in n$.
    \end{enumerate}

    We prove 1 by induction on $n$. For all $p \in m + 0$ we have $p \in m$, so the result holds for $n = 0$.

    Now, suppose the result holds for $n$. Let $p \in m + n^+ = (m+n)^+$ so $p \underline{in} m + n$.
    If $p \in m + n$, we simply apply the induction hypothesis. If $p = m + n$ then $p = m + q$ where
    $q = n \in n^+$.

    To prove 2, if $p = m + q$ then $m = m + 0 \underline{in} m + q = p$ by Theorem 4N, hence $p \notin m$
    by trichotomy.

    It remains to show that $h$ is a bijection.

    To prove $h$ is injective, we consider three cases. If $h(p) = h(p')$ where $p, p' \in m$,
    then $f(p) = f(p')$ so $p = p'$. If $h(m+q) = h(m+q')$ where $q,q' \in n$, then $g(q) = g(q')$
    so $q = q'$. And we cannot have $h(p) = h(m+q)$ for $p \in m$ and $q \in n$ since $h(p) \in A$,
    $h(m+q) \in B$, and $A \cap B = \emptyset$.

    To prove $h$ is surjective, let $x \in A \cup B$. If $x \in A$, there is some $p \in m$ with $f(p) = x$,
    so $h(p) = x$. If $x \in B$, there is some $q \in n$ with $g(q) = x$, so $h(m+q) = x$.

    \subparagraph{(b)}
    Let $f : m \rightarrow A$ and $g : n \rightarrow B$ be bijections.

    We first show that, for any $p \in mn$, there exist unique $i \in m$ and $j \in n$ such that
    $p = mj+i$. 
    
    By Exercise 19, there exist $j$ and $i \in m$ such that $p = mj+i$. We have $j \in n$
    since otherwise $p = mj+i \underline{\ni} mj \underline{\ni} mn$.

    For uniqueness, suppose $mj + i = mj' + i'$ where $i, i' \in m$ and $j, j' \in n$.
    Then we have
    \[ mj \underline{\in} mj + i = mj' + i' \in mj' + m = m(j')^+ \]
    so $j \in (j')^+$ and $j \underline{\in} j'$. Similarly $j' \underline{\in} j$, and so $j = j'$. Therefore
    $i = i'$ by the cancellation law for addition.

    Now define $h : mn \rightarrow A \times B$ by
    \[ h(mj+i) = \langle f(i), g(j) \rangle \]
    where $i \in m$ and $j \in n$. It is easy to check that $h$ is bijective.

    \paragraph{Exercise 38}
    $h(n) = 3n+1$

    \paragraph{Exercise 39}
    $h(n) = n^2$

    \paragraph{Exercise 40}
    $h(n^+) = h(n) + 5$

    \chapter{Chapter 5 --- Construction of the Real Numbers}

    \section{Integers}
    
    \paragraph{Exercise 1}
    No, because $[\langle 0,0 \rangle] = [\langle 1,1 \rangle]$ but $[\langle 0,0 \rangle] \neq [\langle
        2,1 \rangle]$.

    \paragraph{Exercise 2}
    Yes, because if $[\langle m,n \rangle] = [\langle p,q \rangle]$ then $[\langle m,m \rangle] =
    [\langle p,p \rangle]$ because $m + p = m + p$.

    \paragraph{Exercise 3}
    Yes, because if $[\langle m,n \rangle] = [\langle p,q \rangle]$ then $[\langle n,m \rangle] =
    [\langle q,p \rangle]$ because $n + p = m + q$.

    \paragraph{Exercise 4}
    Let $a = [\langle m,n \rangle]$, $b = [\langle p,q \rangle]$ and $c = [\langle r,s \rangle]$.
    Then
    \begin{align*}
        a +_Z (b +_Z c) & = [\langle m,n \rangle] +_Z [\langle p + r, q + s \rangle] \\
        & = [\langle m + (p + r), n + (q + s) \rangle] \\
        & = [\langle (m + p) + r, (n + q) + s \rangle] \\
        & = [\langle m + p, n + q \rangle] +_Z [\langle r,s \rangle] \\
        & = (a +_Z b) +_Z c
    \end{align*}

    \paragraph{Exercise 5}
    \[ [\langle m,n \rangle] - [\langle p,q \rangle] = [\langle m,n \rangle] + [\langle q,p \rangle]
    = [\langle m+q, n+p \rangle] \]

    \paragraph{Exercise 6}
    Let $a = [\langle m,n \rangle]$. Then
    \begin{align*}
        a \cdot_Z 0_Z & = [\langle m,n \rangle] \cdot_Z [\langle 0,0 \rangle] \\
        & = [\langle m 0 + n 0, m 0 + n 0 \rangle] \\
        & = [\langle 0,0 \rangle] \\
        & = 0_Z
    \end{align*}

    \paragraph{Exercise 7}
    We have $a \cdot_Z b +_Z a \cdot_Z (-b) = a \cdot_Z (b +_Z (-b)) = a \cdot_Z 0_Z = 0_Z$,
    hence $a \cdot_Z (-b) = -(a \cdot_Z b)$ by the uniqueness of inverses.

    We prove $(-a) \cdot_Z b = -(a \cdot_Z b)$ similarly.

    \paragraph{Exercise 8}
    \subparagraph{(a)}
    This says $[\langle m + n, 0 \rangle] = [\langle m,0 \rangle] +_Z [\langle n,0 \rangle]$,
    which is true from the definition of $+_Z$.

    \subparagraph{(b)}
    We have
    \begin{align*}
        E(m) \cdot_Z E(n) & = [\langle m, 0 \rangle] \cdot_Z [\langle n,0 \rangle] \\
        & = [\langle mn + 0 \cdot 0, m0 + n0 \rangle] \\
        & = E(mn)
    \end{align*}

    \subparagraph{(c)}
    \begin{align*}
        E(m) <_Z E(n) & \Leftrightarrow [\langle m,0 \rangle] <_Z [\langle n,0 \rangle] \\
        & \Leftrightarrow m + 0 \in n + 0 \\
        & \Leftrightarrow m \in n
    \end{align*}

    \paragraph{Exercise 9}
    \begin{align*}
        E(m) - E(n) & = [\langle m,0 \rangle] - [\langle n, 0 \rangle] \\
        & = [\langle m, n \rangle]
    \end{align*}
    by Exercise 5.
\end{document}